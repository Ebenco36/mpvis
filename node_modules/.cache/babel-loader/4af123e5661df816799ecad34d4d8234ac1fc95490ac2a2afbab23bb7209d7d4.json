{"ast":null,"code":"import { getMarkPropOrConfig, signalOrValueRef } from '../../common';\nimport { wrapCondition } from './conditional';\nimport * as ref from './valueref';\n/**\n * Return encode for non-positional channels with scales. (Text doesn't have scale.)\n */\nexport function nonPosition(channel, model, opt = {}) {\n  const {\n    markDef,\n    encoding,\n    config\n  } = model;\n  const {\n    vgChannel\n  } = opt;\n  let {\n    defaultRef,\n    defaultValue\n  } = opt;\n  if (defaultRef === undefined) {\n    // prettier-ignore\n    defaultValue ?? (defaultValue = getMarkPropOrConfig(channel, markDef, config, {\n      vgChannel,\n      ignoreVgConfig: true\n    }));\n    if (defaultValue !== undefined) {\n      defaultRef = signalOrValueRef(defaultValue);\n    }\n  }\n  const channelDef = encoding[channel];\n  return wrapCondition(model, channelDef, vgChannel ?? channel, cDef => {\n    return ref.midPoint({\n      channel,\n      channelDef: cDef,\n      markDef,\n      config,\n      scaleName: model.scaleName(channel),\n      scale: model.getScaleComponent(channel),\n      stack: null,\n      defaultRef\n    });\n  });\n}","map":{"version":3,"names":["getMarkPropOrConfig","signalOrValueRef","wrapCondition","ref","nonPosition","channel","model","opt","markDef","encoding","config","vgChannel","defaultRef","defaultValue","undefined","ignoreVgConfig","channelDef","cDef","midPoint","scaleName","scale","getScaleComponent","stack"],"sources":["../../../../../src/compile/mark/encode/nonposition.ts"],"sourcesContent":[null],"mappings":"AAIA,SAAQA,mBAAmB,EAAEC,gBAAgB,QAAO,cAAc;AAElE,SAAQC,aAAa,QAAO,eAAe;AAC3C,OAAO,KAAKC,GAAG,MAAM,YAAY;AAEjC;;;AAGA,OAAM,SAAUC,WAAWA,CACzBC,OAAgC,EAChCC,KAAgB,EAChBC,GAAA,GAII,EAAE;EAEN,MAAM;IAACC,OAAO;IAAEC,QAAQ;IAAEC;EAAM,CAAC,GAAGJ,KAAK;EACzC,MAAM;IAACK;EAAS,CAAC,GAAGJ,GAAG;EACvB,IAAI;IAACK,UAAU;IAAEC;EAAY,CAAC,GAAGN,GAAG;EAEpC,IAAIK,UAAU,KAAKE,SAAS,EAAE;IAC5B;IACAD,YAAY,KAAZA,YAAY,GAAKb,mBAAmB,CAACK,OAAO,EAAEG,OAAO,EAAEE,MAAM,EAAE;MAACC,SAAS;MAAEI,cAAc,EAAE;IAAI,CAAC,CAAC;IAEjG,IAAIF,YAAY,KAAKC,SAAS,EAAE;MAC9BF,UAAU,GAAGX,gBAAgB,CAACY,YAAY,CAAC;;;EAI/C,MAAMG,UAAU,GAAGP,QAAQ,CAACJ,OAAO,CAAC;EAEpC,OAAOH,aAAa,CAACI,KAAK,EAAEU,UAAU,EAAEL,SAAS,IAAIN,OAAO,EAAEY,IAAI,IAAG;IACnE,OAAOd,GAAG,CAACe,QAAQ,CAAC;MAClBb,OAAO;MACPW,UAAU,EAAEC,IAAI;MAChBT,OAAO;MACPE,MAAM;MACNS,SAAS,EAAEb,KAAK,CAACa,SAAS,CAACd,OAAO,CAAC;MACnCe,KAAK,EAAEd,KAAK,CAACe,iBAAiB,CAAChB,OAAO,CAAC;MACvCiB,KAAK,EAAE,IAAI;MACXV;KACD,CAAC;EACJ,CAAC,CAAC;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}