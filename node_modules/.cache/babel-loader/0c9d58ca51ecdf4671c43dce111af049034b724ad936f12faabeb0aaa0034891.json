{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { applyPatch } from 'fast-json-patch';\nimport stringify from 'json-stringify-pretty-compact';\nimport * as vegaImport from 'vega';\nimport { writeConfig, isString, mergeConfig, isBoolean, isObject } from 'vega';\nimport { expressionInterpreter } from 'vega-interpreter';\nimport * as vegaLiteImport from 'vega-lite';\nimport schemaParser from 'vega-schema-url-parser';\nimport * as themes from 'vega-themes';\nimport { Handler } from 'vega-tooltip';\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction getDefaultExportFromCjs(x) {\n  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\nvar iterator;\nvar hasRequiredIterator;\nfunction requireIterator() {\n  if (hasRequiredIterator) return iterator;\n  hasRequiredIterator = 1;\n  iterator = function (Yallist) {\n    Yallist.prototype[Symbol.iterator] = function* () {\n      for (let walker = this.head; walker; walker = walker.next) {\n        yield walker.value;\n      }\n    };\n  };\n  return iterator;\n}\nvar yallist = Yallist$1;\nYallist$1.Node = Node;\nYallist$1.create = Yallist$1;\nfunction Yallist$1(list) {\n  var self = this;\n  if (!(self instanceof Yallist$1)) {\n    self = new Yallist$1();\n  }\n  self.tail = null;\n  self.head = null;\n  self.length = 0;\n  if (list && typeof list.forEach === 'function') {\n    list.forEach(function (item) {\n      self.push(item);\n    });\n  } else if (arguments.length > 0) {\n    for (var i = 0, l = arguments.length; i < l; i++) {\n      self.push(arguments[i]);\n    }\n  }\n  return self;\n}\nYallist$1.prototype.removeNode = function (node) {\n  if (node.list !== this) {\n    throw new Error('removing node which does not belong to this list');\n  }\n  var next = node.next;\n  var prev = node.prev;\n  if (next) {\n    next.prev = prev;\n  }\n  if (prev) {\n    prev.next = next;\n  }\n  if (node === this.head) {\n    this.head = next;\n  }\n  if (node === this.tail) {\n    this.tail = prev;\n  }\n  node.list.length--;\n  node.next = null;\n  node.prev = null;\n  node.list = null;\n  return next;\n};\nYallist$1.prototype.unshiftNode = function (node) {\n  if (node === this.head) {\n    return;\n  }\n  if (node.list) {\n    node.list.removeNode(node);\n  }\n  var head = this.head;\n  node.list = this;\n  node.next = head;\n  if (head) {\n    head.prev = node;\n  }\n  this.head = node;\n  if (!this.tail) {\n    this.tail = node;\n  }\n  this.length++;\n};\nYallist$1.prototype.pushNode = function (node) {\n  if (node === this.tail) {\n    return;\n  }\n  if (node.list) {\n    node.list.removeNode(node);\n  }\n  var tail = this.tail;\n  node.list = this;\n  node.prev = tail;\n  if (tail) {\n    tail.next = node;\n  }\n  this.tail = node;\n  if (!this.head) {\n    this.head = node;\n  }\n  this.length++;\n};\nYallist$1.prototype.push = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    push(this, arguments[i]);\n  }\n  return this.length;\n};\nYallist$1.prototype.unshift = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    unshift(this, arguments[i]);\n  }\n  return this.length;\n};\nYallist$1.prototype.pop = function () {\n  if (!this.tail) {\n    return undefined;\n  }\n  var res = this.tail.value;\n  this.tail = this.tail.prev;\n  if (this.tail) {\n    this.tail.next = null;\n  } else {\n    this.head = null;\n  }\n  this.length--;\n  return res;\n};\nYallist$1.prototype.shift = function () {\n  if (!this.head) {\n    return undefined;\n  }\n  var res = this.head.value;\n  this.head = this.head.next;\n  if (this.head) {\n    this.head.prev = null;\n  } else {\n    this.tail = null;\n  }\n  this.length--;\n  return res;\n};\nYallist$1.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this;\n  for (var walker = this.head, i = 0; walker !== null; i++) {\n    fn.call(thisp, walker.value, i, this);\n    walker = walker.next;\n  }\n};\nYallist$1.prototype.forEachReverse = function (fn, thisp) {\n  thisp = thisp || this;\n  for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {\n    fn.call(thisp, walker.value, i, this);\n    walker = walker.prev;\n  }\n};\nYallist$1.prototype.get = function (n) {\n  for (var i = 0, walker = this.head; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.next;\n  }\n  if (i === n && walker !== null) {\n    return walker.value;\n  }\n};\nYallist$1.prototype.getReverse = function (n) {\n  for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.prev;\n  }\n  if (i === n && walker !== null) {\n    return walker.value;\n  }\n};\nYallist$1.prototype.map = function (fn, thisp) {\n  thisp = thisp || this;\n  var res = new Yallist$1();\n  for (var walker = this.head; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this));\n    walker = walker.next;\n  }\n  return res;\n};\nYallist$1.prototype.mapReverse = function (fn, thisp) {\n  thisp = thisp || this;\n  var res = new Yallist$1();\n  for (var walker = this.tail; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this));\n    walker = walker.prev;\n  }\n  return res;\n};\nYallist$1.prototype.reduce = function (fn, initial) {\n  var acc;\n  var walker = this.head;\n  if (arguments.length > 1) {\n    acc = initial;\n  } else if (this.head) {\n    walker = this.head.next;\n    acc = this.head.value;\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value');\n  }\n  for (var i = 0; walker !== null; i++) {\n    acc = fn(acc, walker.value, i);\n    walker = walker.next;\n  }\n  return acc;\n};\nYallist$1.prototype.reduceReverse = function (fn, initial) {\n  var acc;\n  var walker = this.tail;\n  if (arguments.length > 1) {\n    acc = initial;\n  } else if (this.tail) {\n    walker = this.tail.prev;\n    acc = this.tail.value;\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value');\n  }\n  for (var i = this.length - 1; walker !== null; i--) {\n    acc = fn(acc, walker.value, i);\n    walker = walker.prev;\n  }\n  return acc;\n};\nYallist$1.prototype.toArray = function () {\n  var arr = new Array(this.length);\n  for (var i = 0, walker = this.head; walker !== null; i++) {\n    arr[i] = walker.value;\n    walker = walker.next;\n  }\n  return arr;\n};\nYallist$1.prototype.toArrayReverse = function () {\n  var arr = new Array(this.length);\n  for (var i = 0, walker = this.tail; walker !== null; i++) {\n    arr[i] = walker.value;\n    walker = walker.prev;\n  }\n  return arr;\n};\nYallist$1.prototype.slice = function (from, to) {\n  to = to || this.length;\n  if (to < 0) {\n    to += this.length;\n  }\n  from = from || 0;\n  if (from < 0) {\n    from += this.length;\n  }\n  var ret = new Yallist$1();\n  if (to < from || to < 0) {\n    return ret;\n  }\n  if (from < 0) {\n    from = 0;\n  }\n  if (to > this.length) {\n    to = this.length;\n  }\n  for (var i = 0, walker = this.head; walker !== null && i < from; i++) {\n    walker = walker.next;\n  }\n  for (; walker !== null && i < to; i++, walker = walker.next) {\n    ret.push(walker.value);\n  }\n  return ret;\n};\nYallist$1.prototype.sliceReverse = function (from, to) {\n  to = to || this.length;\n  if (to < 0) {\n    to += this.length;\n  }\n  from = from || 0;\n  if (from < 0) {\n    from += this.length;\n  }\n  var ret = new Yallist$1();\n  if (to < from || to < 0) {\n    return ret;\n  }\n  if (from < 0) {\n    from = 0;\n  }\n  if (to > this.length) {\n    to = this.length;\n  }\n  for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {\n    walker = walker.prev;\n  }\n  for (; walker !== null && i > from; i--, walker = walker.prev) {\n    ret.push(walker.value);\n  }\n  return ret;\n};\nYallist$1.prototype.splice = function (start, deleteCount, ...nodes) {\n  if (start > this.length) {\n    start = this.length - 1;\n  }\n  if (start < 0) {\n    start = this.length + start;\n  }\n  for (var i = 0, walker = this.head; walker !== null && i < start; i++) {\n    walker = walker.next;\n  }\n  var ret = [];\n  for (var i = 0; walker && i < deleteCount; i++) {\n    ret.push(walker.value);\n    walker = this.removeNode(walker);\n  }\n  if (walker === null) {\n    walker = this.tail;\n  }\n  if (walker !== this.head && walker !== this.tail) {\n    walker = walker.prev;\n  }\n  for (var i = 0; i < nodes.length; i++) {\n    walker = insert(this, walker, nodes[i]);\n  }\n  return ret;\n};\nYallist$1.prototype.reverse = function () {\n  var head = this.head;\n  var tail = this.tail;\n  for (var walker = head; walker !== null; walker = walker.prev) {\n    var p = walker.prev;\n    walker.prev = walker.next;\n    walker.next = p;\n  }\n  this.head = tail;\n  this.tail = head;\n  return this;\n};\nfunction insert(self, node, value) {\n  var inserted = node === self.head ? new Node(value, null, node, self) : new Node(value, node, node.next, self);\n  if (inserted.next === null) {\n    self.tail = inserted;\n  }\n  if (inserted.prev === null) {\n    self.head = inserted;\n  }\n  self.length++;\n  return inserted;\n}\nfunction push(self, item) {\n  self.tail = new Node(item, self.tail, null, self);\n  if (!self.head) {\n    self.head = self.tail;\n  }\n  self.length++;\n}\nfunction unshift(self, item) {\n  self.head = new Node(item, null, self.head, self);\n  if (!self.tail) {\n    self.tail = self.head;\n  }\n  self.length++;\n}\nfunction Node(value, prev, next, list) {\n  if (!(this instanceof Node)) {\n    return new Node(value, prev, next, list);\n  }\n  this.list = list;\n  this.value = value;\n  if (prev) {\n    prev.next = this;\n    this.prev = prev;\n  } else {\n    this.prev = null;\n  }\n  if (next) {\n    next.prev = this;\n    this.next = next;\n  } else {\n    this.next = null;\n  }\n}\ntry {\n  // add if support for Symbol.iterator is present\n  requireIterator()(Yallist$1);\n} catch (er) {}\n\n// A linked list to keep track of recently-used-ness\nconst Yallist = yallist;\nconst MAX = Symbol('max');\nconst LENGTH = Symbol('length');\nconst LENGTH_CALCULATOR = Symbol('lengthCalculator');\nconst ALLOW_STALE = Symbol('allowStale');\nconst MAX_AGE = Symbol('maxAge');\nconst DISPOSE = Symbol('dispose');\nconst NO_DISPOSE_ON_SET = Symbol('noDisposeOnSet');\nconst LRU_LIST = Symbol('lruList');\nconst CACHE = Symbol('cache');\nconst UPDATE_AGE_ON_GET = Symbol('updateAgeOnGet');\nconst naiveLength = () => 1;\n\n// lruList is a yallist where the head is the youngest\n// item, and the tail is the oldest.  the list contains the Hit\n// objects as the entries.\n// Each Hit object has a reference to its Yallist.Node.  This\n// never changes.\n//\n// cache is a Map (or PseudoMap) that matches the keys to\n// the Yallist.Node object.\nclass LRUCache {\n  constructor(options) {\n    if (typeof options === 'number') options = {\n      max: options\n    };\n    if (!options) options = {};\n    if (options.max && (typeof options.max !== 'number' || options.max < 0)) throw new TypeError('max must be a non-negative number');\n    // Kind of weird to have a default max of Infinity, but oh well.\n    this[MAX] = options.max || Infinity;\n    const lc = options.length || naiveLength;\n    this[LENGTH_CALCULATOR] = typeof lc !== 'function' ? naiveLength : lc;\n    this[ALLOW_STALE] = options.stale || false;\n    if (options.maxAge && typeof options.maxAge !== 'number') throw new TypeError('maxAge must be a number');\n    this[MAX_AGE] = options.maxAge || 0;\n    this[DISPOSE] = options.dispose;\n    this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false;\n    this[UPDATE_AGE_ON_GET] = options.updateAgeOnGet || false;\n    this.reset();\n  }\n\n  // resize the cache when the max changes.\n  set max(mL) {\n    if (typeof mL !== 'number' || mL < 0) throw new TypeError('max must be a non-negative number');\n    this[MAX] = mL || Infinity;\n    trim(this);\n  }\n  get max() {\n    return this[MAX];\n  }\n  set allowStale(allowStale) {\n    this[ALLOW_STALE] = !!allowStale;\n  }\n  get allowStale() {\n    return this[ALLOW_STALE];\n  }\n  set maxAge(mA) {\n    if (typeof mA !== 'number') throw new TypeError('maxAge must be a non-negative number');\n    this[MAX_AGE] = mA;\n    trim(this);\n  }\n  get maxAge() {\n    return this[MAX_AGE];\n  }\n\n  // resize the cache when the lengthCalculator changes.\n  set lengthCalculator(lC) {\n    if (typeof lC !== 'function') lC = naiveLength;\n    if (lC !== this[LENGTH_CALCULATOR]) {\n      this[LENGTH_CALCULATOR] = lC;\n      this[LENGTH] = 0;\n      this[LRU_LIST].forEach(hit => {\n        hit.length = this[LENGTH_CALCULATOR](hit.value, hit.key);\n        this[LENGTH] += hit.length;\n      });\n    }\n    trim(this);\n  }\n  get lengthCalculator() {\n    return this[LENGTH_CALCULATOR];\n  }\n  get length() {\n    return this[LENGTH];\n  }\n  get itemCount() {\n    return this[LRU_LIST].length;\n  }\n  rforEach(fn, thisp) {\n    thisp = thisp || this;\n    for (let walker = this[LRU_LIST].tail; walker !== null;) {\n      const prev = walker.prev;\n      forEachStep(this, fn, walker, thisp);\n      walker = prev;\n    }\n  }\n  forEach(fn, thisp) {\n    thisp = thisp || this;\n    for (let walker = this[LRU_LIST].head; walker !== null;) {\n      const next = walker.next;\n      forEachStep(this, fn, walker, thisp);\n      walker = next;\n    }\n  }\n  keys() {\n    return this[LRU_LIST].toArray().map(k => k.key);\n  }\n  values() {\n    return this[LRU_LIST].toArray().map(k => k.value);\n  }\n  reset() {\n    if (this[DISPOSE] && this[LRU_LIST] && this[LRU_LIST].length) {\n      this[LRU_LIST].forEach(hit => this[DISPOSE](hit.key, hit.value));\n    }\n    this[CACHE] = new Map(); // hash of items by key\n    this[LRU_LIST] = new Yallist(); // list of items in order of use recency\n    this[LENGTH] = 0; // length of items in the list\n  }\n\n  dump() {\n    return this[LRU_LIST].map(hit => isStale(this, hit) ? false : {\n      k: hit.key,\n      v: hit.value,\n      e: hit.now + (hit.maxAge || 0)\n    }).toArray().filter(h => h);\n  }\n  dumpLru() {\n    return this[LRU_LIST];\n  }\n  set(key, value, maxAge) {\n    maxAge = maxAge || this[MAX_AGE];\n    if (maxAge && typeof maxAge !== 'number') throw new TypeError('maxAge must be a number');\n    const now = maxAge ? Date.now() : 0;\n    const len = this[LENGTH_CALCULATOR](value, key);\n    if (this[CACHE].has(key)) {\n      if (len > this[MAX]) {\n        del(this, this[CACHE].get(key));\n        return false;\n      }\n      const node = this[CACHE].get(key);\n      const item = node.value;\n\n      // dispose of the old one before overwriting\n      // split out into 2 ifs for better coverage tracking\n      if (this[DISPOSE]) {\n        if (!this[NO_DISPOSE_ON_SET]) this[DISPOSE](key, item.value);\n      }\n      item.now = now;\n      item.maxAge = maxAge;\n      item.value = value;\n      this[LENGTH] += len - item.length;\n      item.length = len;\n      this.get(key);\n      trim(this);\n      return true;\n    }\n    const hit = new Entry(key, value, len, now, maxAge);\n\n    // oversized objects fall out of cache automatically.\n    if (hit.length > this[MAX]) {\n      if (this[DISPOSE]) this[DISPOSE](key, value);\n      return false;\n    }\n    this[LENGTH] += hit.length;\n    this[LRU_LIST].unshift(hit);\n    this[CACHE].set(key, this[LRU_LIST].head);\n    trim(this);\n    return true;\n  }\n  has(key) {\n    if (!this[CACHE].has(key)) return false;\n    const hit = this[CACHE].get(key).value;\n    return !isStale(this, hit);\n  }\n  get(key) {\n    return get(this, key, true);\n  }\n  peek(key) {\n    return get(this, key, false);\n  }\n  pop() {\n    const node = this[LRU_LIST].tail;\n    if (!node) return null;\n    del(this, node);\n    return node.value;\n  }\n  del(key) {\n    del(this, this[CACHE].get(key));\n  }\n  load(arr) {\n    // reset the cache\n    this.reset();\n    const now = Date.now();\n    // A previous serialized cache has the most recent items first\n    for (let l = arr.length - 1; l >= 0; l--) {\n      const hit = arr[l];\n      const expiresAt = hit.e || 0;\n      if (expiresAt === 0)\n        // the item was created without expiration in a non aged cache\n        this.set(hit.k, hit.v);else {\n        const maxAge = expiresAt - now;\n        // dont add already expired items\n        if (maxAge > 0) {\n          this.set(hit.k, hit.v, maxAge);\n        }\n      }\n    }\n  }\n  prune() {\n    this[CACHE].forEach((value, key) => get(this, key, false));\n  }\n}\nconst get = (self, key, doUse) => {\n  const node = self[CACHE].get(key);\n  if (node) {\n    const hit = node.value;\n    if (isStale(self, hit)) {\n      del(self, node);\n      if (!self[ALLOW_STALE]) return undefined;\n    } else {\n      if (doUse) {\n        if (self[UPDATE_AGE_ON_GET]) node.value.now = Date.now();\n        self[LRU_LIST].unshiftNode(node);\n      }\n    }\n    return hit.value;\n  }\n};\nconst isStale = (self, hit) => {\n  if (!hit || !hit.maxAge && !self[MAX_AGE]) return false;\n  const diff = Date.now() - hit.now;\n  return hit.maxAge ? diff > hit.maxAge : self[MAX_AGE] && diff > self[MAX_AGE];\n};\nconst trim = self => {\n  if (self[LENGTH] > self[MAX]) {\n    for (let walker = self[LRU_LIST].tail; self[LENGTH] > self[MAX] && walker !== null;) {\n      // We know that we're about to delete this one, and also\n      // what the next least recently used key will be, so just\n      // go ahead and set it now.\n      const prev = walker.prev;\n      del(self, walker);\n      walker = prev;\n    }\n  }\n};\nconst del = (self, node) => {\n  if (node) {\n    const hit = node.value;\n    if (self[DISPOSE]) self[DISPOSE](hit.key, hit.value);\n    self[LENGTH] -= hit.length;\n    self[CACHE].delete(hit.key);\n    self[LRU_LIST].removeNode(node);\n  }\n};\nclass Entry {\n  constructor(key, value, length, now, maxAge) {\n    this.key = key;\n    this.value = value;\n    this.length = length;\n    this.now = now;\n    this.maxAge = maxAge || 0;\n  }\n}\nconst forEachStep = (self, fn, node, thisp) => {\n  let hit = node.value;\n  if (isStale(self, hit)) {\n    del(self, node);\n    if (!self[ALLOW_STALE]) hit = undefined;\n  }\n  if (hit) fn.call(thisp, hit.value, hit.key, self);\n};\nvar lruCache = LRUCache;\n\n// parse out just the options we care about\nconst looseOption = Object.freeze({\n  loose: true\n});\nconst emptyOpts = Object.freeze({});\nconst parseOptions$1 = options => {\n  if (!options) {\n    return emptyOpts;\n  }\n  if (typeof options !== 'object') {\n    return looseOption;\n  }\n  return options;\n};\nvar parseOptions_1 = parseOptions$1;\nvar re$1 = {\n  exports: {}\n};\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0';\nconst MAX_LENGTH$1 = 256;\nconst MAX_SAFE_INTEGER$1 = Number.MAX_SAFE_INTEGER || /* istanbul ignore next */9007199254740991;\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16;\nconst RELEASE_TYPES = ['major', 'premajor', 'minor', 'preminor', 'patch', 'prepatch', 'prerelease'];\nvar constants = {\n  MAX_LENGTH: MAX_LENGTH$1,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_INTEGER: MAX_SAFE_INTEGER$1,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010\n};\nconst debug$1 = typeof process === 'object' && process.env && process.env.NODE_DEBUG && /\\bsemver\\b/i.test(process.env.NODE_DEBUG) ? (...args) => console.error('SEMVER', ...args) : () => {};\nvar debug_1 = debug$1;\n(function (module, exports) {\n  const {\n    MAX_SAFE_COMPONENT_LENGTH\n  } = constants;\n  const debug = debug_1;\n  exports = module.exports = {};\n\n  // The actual regexps go on exports.re\n  const re = exports.re = [];\n  const src = exports.src = [];\n  const t = exports.t = {};\n  let R = 0;\n  const createToken = (name, value, isGlobal) => {\n    const index = R++;\n    debug(name, index, value);\n    t[name] = index;\n    src[index] = value;\n    re[index] = new RegExp(value, isGlobal ? 'g' : undefined);\n  };\n\n  // The following Regular Expressions can be used for tokenizing,\n  // validating, and parsing SemVer version strings.\n\n  // ## Numeric Identifier\n  // A single `0`, or a non-zero digit followed by zero or more digits.\n\n  createToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*');\n  createToken('NUMERICIDENTIFIERLOOSE', '[0-9]+');\n\n  // ## Non-numeric Identifier\n  // Zero or more digits, followed by a letter or hyphen, and then zero or\n  // more letters, digits, or hyphens.\n\n  createToken('NONNUMERICIDENTIFIER', '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*');\n\n  // ## Main Version\n  // Three dot-separated numeric identifiers.\n\n  createToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` + `(${src[t.NUMERICIDENTIFIER]})\\\\.` + `(${src[t.NUMERICIDENTIFIER]})`);\n  createToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` + `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` + `(${src[t.NUMERICIDENTIFIERLOOSE]})`);\n\n  // ## Pre-release Version Identifier\n  // A numeric identifier, or a non-numeric identifier.\n\n  createToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]}|${src[t.NONNUMERICIDENTIFIER]})`);\n  createToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]}|${src[t.NONNUMERICIDENTIFIER]})`);\n\n  // ## Pre-release Version\n  // Hyphen, followed by one or more dot-separated pre-release version\n  // identifiers.\n\n  createToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`);\n  createToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`);\n\n  // ## Build Metadata Identifier\n  // Any combination of digits, letters, or hyphens.\n\n  createToken('BUILDIDENTIFIER', '[0-9A-Za-z-]+');\n\n  // ## Build Metadata\n  // Plus sign, followed by one or more period-separated build metadata\n  // identifiers.\n\n  createToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`);\n\n  // ## Full Version String\n  // A main version, followed optionally by a pre-release version and\n  // build metadata.\n\n  // Note that the only major, minor, patch, and pre-release sections of\n  // the version string are capturing groups.  The build metadata is not a\n  // capturing group, because it should not ever be used in version\n  // comparison.\n\n  createToken('FULLPLAIN', `v?${src[t.MAINVERSION]}${src[t.PRERELEASE]}?${src[t.BUILD]}?`);\n  createToken('FULL', `^${src[t.FULLPLAIN]}$`);\n\n  // like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n  // also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n  // common in the npm registry.\n  createToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]}${src[t.PRERELEASELOOSE]}?${src[t.BUILD]}?`);\n  createToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`);\n  createToken('GTLT', '((?:<|>)?=?)');\n\n  // Something like \"2.*\" or \"1.2.x\".\n  // Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n  // Only the first item is strictly required.\n  createToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`);\n  createToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`);\n  createToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` + `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` + `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` + `(?:${src[t.PRERELEASE]})?${src[t.BUILD]}?` + `)?)?`);\n  createToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` + `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` + `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` + `(?:${src[t.PRERELEASELOOSE]})?${src[t.BUILD]}?` + `)?)?`);\n  createToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`);\n  createToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`);\n\n  // Coercion.\n  // Extract anything that could conceivably be a part of a valid semver\n  createToken('COERCE', `${'(^|[^\\\\d])' + '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` + `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` + `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` + `(?:$|[^\\\\d])`);\n  createToken('COERCERTL', src[t.COERCE], true);\n\n  // Tilde ranges.\n  // Meaning is \"reasonably at or greater than\"\n  createToken('LONETILDE', '(?:~>?)');\n  createToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true);\n  exports.tildeTrimReplace = '$1~';\n  createToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`);\n  createToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`);\n\n  // Caret ranges.\n  // Meaning is \"at least and backwards compatible with\"\n  createToken('LONECARET', '(?:\\\\^)');\n  createToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true);\n  exports.caretTrimReplace = '$1^';\n  createToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`);\n  createToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`);\n\n  // A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\n  createToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`);\n  createToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`);\n\n  // An expression to strip any whitespace between the gtlt and the thing\n  // it modifies, so that `> 1.2.3` ==> `>1.2.3`\n  createToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true);\n  exports.comparatorTrimReplace = '$1$2$3';\n\n  // Something like `1.2.3 - 1.2.4`\n  // Note that these all use the loose form, because they'll be\n  // checked against either the strict or loose comparator form\n  // later.\n  createToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` + `\\\\s+-\\\\s+` + `(${src[t.XRANGEPLAIN]})` + `\\\\s*$`);\n  createToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` + `\\\\s+-\\\\s+` + `(${src[t.XRANGEPLAINLOOSE]})` + `\\\\s*$`);\n\n  // Star ranges basically just allow anything at all.\n  createToken('STAR', '(<|>)?=?\\\\s*\\\\*');\n  // >=0.0.0 is like a star\n  createToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$');\n  createToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$');\n})(re$1, re$1.exports);\nvar reExports = re$1.exports;\nconst numeric = /^[0-9]+$/;\nconst compareIdentifiers$1 = (a, b) => {\n  const anum = numeric.test(a);\n  const bnum = numeric.test(b);\n  if (anum && bnum) {\n    a = +a;\n    b = +b;\n  }\n  return a === b ? 0 : anum && !bnum ? -1 : bnum && !anum ? 1 : a < b ? -1 : 1;\n};\nconst rcompareIdentifiers = (a, b) => compareIdentifiers$1(b, a);\nvar identifiers = {\n  compareIdentifiers: compareIdentifiers$1,\n  rcompareIdentifiers\n};\nconst debug = debug_1;\nconst {\n  MAX_LENGTH,\n  MAX_SAFE_INTEGER\n} = constants;\nconst {\n  re,\n  t\n} = reExports;\nconst parseOptions = parseOptions_1;\nconst {\n  compareIdentifiers\n} = identifiers;\nlet SemVer$1 = class SemVer {\n  constructor(version, options) {\n    options = parseOptions(options);\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose && version.includePrerelease === !!options.includePrerelease) {\n        return version;\n      } else {\n        version = version.version;\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid Version: ${version}`);\n    }\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(`version is longer than ${MAX_LENGTH} characters`);\n    }\n    debug('SemVer', version, options);\n    this.options = options;\n    this.loose = !!options.loose;\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease;\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL]);\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`);\n    }\n    this.raw = version;\n\n    // these are actually numbers\n    this.major = +m[1];\n    this.minor = +m[2];\n    this.patch = +m[3];\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version');\n    }\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version');\n    }\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version');\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = [];\n    } else {\n      this.prerelease = m[4].split('.').map(id => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id;\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num;\n          }\n        }\n        return id;\n      });\n    }\n    this.build = m[5] ? m[5].split('.') : [];\n    this.format();\n  }\n  format() {\n    this.version = `${this.major}.${this.minor}.${this.patch}`;\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`;\n    }\n    return this.version;\n  }\n  toString() {\n    return this.version;\n  }\n  compare(other) {\n    debug('SemVer.compare', this.version, this.options, other);\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0;\n      }\n      other = new SemVer(other, this.options);\n    }\n    if (other.version === this.version) {\n      return 0;\n    }\n    return this.compareMain(other) || this.comparePre(other);\n  }\n  compareMain(other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options);\n    }\n    return compareIdentifiers(this.major, other.major) || compareIdentifiers(this.minor, other.minor) || compareIdentifiers(this.patch, other.patch);\n  }\n  comparePre(other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options);\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1;\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1;\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0;\n    }\n    let i = 0;\n    do {\n      const a = this.prerelease[i];\n      const b = other.prerelease[i];\n      debug('prerelease compare', i, a, b);\n      if (a === undefined && b === undefined) {\n        return 0;\n      } else if (b === undefined) {\n        return 1;\n      } else if (a === undefined) {\n        return -1;\n      } else if (a === b) {\n        continue;\n      } else {\n        return compareIdentifiers(a, b);\n      }\n    } while (++i);\n  }\n  compareBuild(other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options);\n    }\n    let i = 0;\n    do {\n      const a = this.build[i];\n      const b = other.build[i];\n      debug('prerelease compare', i, a, b);\n      if (a === undefined && b === undefined) {\n        return 0;\n      } else if (b === undefined) {\n        return 1;\n      } else if (a === undefined) {\n        return -1;\n      } else if (a === b) {\n        continue;\n      } else {\n        return compareIdentifiers(a, b);\n      }\n    } while (++i);\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc(release, identifier, identifierBase) {\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0;\n        this.patch = 0;\n        this.minor = 0;\n        this.major++;\n        this.inc('pre', identifier, identifierBase);\n        break;\n      case 'preminor':\n        this.prerelease.length = 0;\n        this.patch = 0;\n        this.minor++;\n        this.inc('pre', identifier, identifierBase);\n        break;\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0;\n        this.inc('patch', identifier, identifierBase);\n        this.inc('pre', identifier, identifierBase);\n        break;\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase);\n        }\n        this.inc('pre', identifier, identifierBase);\n        break;\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (this.minor !== 0 || this.patch !== 0 || this.prerelease.length === 0) {\n          this.major++;\n        }\n        this.minor = 0;\n        this.patch = 0;\n        this.prerelease = [];\n        break;\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++;\n        }\n        this.patch = 0;\n        this.prerelease = [];\n        break;\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++;\n        }\n        this.prerelease = [];\n        break;\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre':\n        if (this.prerelease.length === 0) {\n          this.prerelease = [0];\n        } else {\n          let i = this.prerelease.length;\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++;\n              i = -2;\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            this.prerelease.push(0);\n          }\n        }\n        if (identifier) {\n          const base = Number(identifierBase) ? 1 : 0;\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = [identifier, base];\n            }\n          } else {\n            this.prerelease = [identifier, base];\n          }\n        }\n        break;\n      default:\n        throw new Error(`invalid increment argument: ${release}`);\n    }\n    this.format();\n    this.raw = this.version;\n    return this;\n  }\n};\nvar semver = SemVer$1;\nconst SemVer = semver;\nconst compare$6 = (a, b, loose) => new SemVer(a, loose).compare(new SemVer(b, loose));\nvar compare_1 = compare$6;\nconst compare$5 = compare_1;\nconst eq$1 = (a, b, loose) => compare$5(a, b, loose) === 0;\nvar eq_1 = eq$1;\nconst compare$4 = compare_1;\nconst neq$1 = (a, b, loose) => compare$4(a, b, loose) !== 0;\nvar neq_1 = neq$1;\nconst compare$3 = compare_1;\nconst gt$1 = (a, b, loose) => compare$3(a, b, loose) > 0;\nvar gt_1 = gt$1;\nconst compare$2 = compare_1;\nconst gte$1 = (a, b, loose) => compare$2(a, b, loose) >= 0;\nvar gte_1 = gte$1;\nconst compare$1 = compare_1;\nconst lt$1 = (a, b, loose) => compare$1(a, b, loose) < 0;\nvar lt_1 = lt$1;\nconst compare = compare_1;\nconst lte$1 = (a, b, loose) => compare(a, b, loose) <= 0;\nvar lte_1 = lte$1;\nconst eq = eq_1;\nconst neq = neq_1;\nconst gt = gt_1;\nconst gte = gte_1;\nconst lt = lt_1;\nconst lte = lte_1;\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version;\n      }\n      if (typeof b === 'object') {\n        b = b.version;\n      }\n      return a === b;\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version;\n      }\n      if (typeof b === 'object') {\n        b = b.version;\n      }\n      return a !== b;\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose);\n    case '!=':\n      return neq(a, b, loose);\n    case '>':\n      return gt(a, b, loose);\n    case '>=':\n      return gte(a, b, loose);\n    case '<':\n      return lt(a, b, loose);\n    case '<=':\n      return lte(a, b, loose);\n    default:\n      throw new TypeError(`Invalid operator: ${op}`);\n  }\n};\nvar cmp_1 = cmp;\nvar comparator;\nvar hasRequiredComparator;\nfunction requireComparator() {\n  if (hasRequiredComparator) return comparator;\n  hasRequiredComparator = 1;\n  const ANY = Symbol('SemVer ANY');\n  // hoisted class for cyclic dependency\n  class Comparator {\n    static get ANY() {\n      return ANY;\n    }\n    constructor(comp, options) {\n      options = parseOptions(options);\n      if (comp instanceof Comparator) {\n        if (comp.loose === !!options.loose) {\n          return comp;\n        } else {\n          comp = comp.value;\n        }\n      }\n      debug('comparator', comp, options);\n      this.options = options;\n      this.loose = !!options.loose;\n      this.parse(comp);\n      if (this.semver === ANY) {\n        this.value = '';\n      } else {\n        this.value = this.operator + this.semver.version;\n      }\n      debug('comp', this);\n    }\n    parse(comp) {\n      const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR];\n      const m = comp.match(r);\n      if (!m) {\n        throw new TypeError(`Invalid comparator: ${comp}`);\n      }\n      this.operator = m[1] !== undefined ? m[1] : '';\n      if (this.operator === '=') {\n        this.operator = '';\n      }\n\n      // if it literally is just '>' or '' then allow anything.\n      if (!m[2]) {\n        this.semver = ANY;\n      } else {\n        this.semver = new SemVer(m[2], this.options.loose);\n      }\n    }\n    toString() {\n      return this.value;\n    }\n    test(version) {\n      debug('Comparator.test', version, this.options.loose);\n      if (this.semver === ANY || version === ANY) {\n        return true;\n      }\n      if (typeof version === 'string') {\n        try {\n          version = new SemVer(version, this.options);\n        } catch (er) {\n          return false;\n        }\n      }\n      return cmp(version, this.operator, this.semver, this.options);\n    }\n    intersects(comp, options) {\n      if (!(comp instanceof Comparator)) {\n        throw new TypeError('a Comparator is required');\n      }\n      if (this.operator === '') {\n        if (this.value === '') {\n          return true;\n        }\n        return new Range(comp.value, options).test(this.value);\n      } else if (comp.operator === '') {\n        if (comp.value === '') {\n          return true;\n        }\n        return new Range(this.value, options).test(comp.semver);\n      }\n      options = parseOptions(options);\n\n      // Special cases where nothing can possibly be lower\n      if (options.includePrerelease && (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n        return false;\n      }\n      if (!options.includePrerelease && (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n        return false;\n      }\n\n      // Same direction increasing (> or >=)\n      if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n        return true;\n      }\n      // Same direction decreasing (< or <=)\n      if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n        return true;\n      }\n      // same SemVer and both sides are inclusive (<= or >=)\n      if (this.semver.version === comp.semver.version && this.operator.includes('=') && comp.operator.includes('=')) {\n        return true;\n      }\n      // opposite directions less than\n      if (cmp(this.semver, '<', comp.semver, options) && this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n        return true;\n      }\n      // opposite directions greater than\n      if (cmp(this.semver, '>', comp.semver, options) && this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n        return true;\n      }\n      return false;\n    }\n  }\n  comparator = Comparator;\n  const parseOptions = parseOptions_1;\n  const {\n    re,\n    t\n  } = reExports;\n  const cmp = cmp_1;\n  const debug = debug_1;\n  const SemVer = semver;\n  const Range = requireRange();\n  return comparator;\n}\nvar range;\nvar hasRequiredRange;\nfunction requireRange() {\n  if (hasRequiredRange) return range;\n  hasRequiredRange = 1;\n  // hoisted class for cyclic dependency\n  class Range {\n    constructor(range, options) {\n      options = parseOptions(options);\n      if (range instanceof Range) {\n        if (range.loose === !!options.loose && range.includePrerelease === !!options.includePrerelease) {\n          return range;\n        } else {\n          return new Range(range.raw, options);\n        }\n      }\n      if (range instanceof Comparator) {\n        // just put it in the set and return\n        this.raw = range.value;\n        this.set = [[range]];\n        this.format();\n        return this;\n      }\n      this.options = options;\n      this.loose = !!options.loose;\n      this.includePrerelease = !!options.includePrerelease;\n\n      // First, split based on boolean or ||\n      this.raw = range;\n      this.set = range.split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length);\n      if (!this.set.length) {\n        throw new TypeError(`Invalid SemVer Range: ${range}`);\n      }\n\n      // if we have any that are not the null set, throw out null sets.\n      if (this.set.length > 1) {\n        // keep the first one, in case they're all null sets\n        const first = this.set[0];\n        this.set = this.set.filter(c => !isNullSet(c[0]));\n        if (this.set.length === 0) {\n          this.set = [first];\n        } else if (this.set.length > 1) {\n          // if we have any that are *, then the range is just *\n          for (const c of this.set) {\n            if (c.length === 1 && isAny(c[0])) {\n              this.set = [c];\n              break;\n            }\n          }\n        }\n      }\n      this.format();\n    }\n    format() {\n      this.range = this.set.map(comps => {\n        return comps.join(' ').trim();\n      }).join('||').trim();\n      return this.range;\n    }\n    toString() {\n      return this.range;\n    }\n    parseRange(range) {\n      range = range.trim();\n\n      // memoize range parsing for performance.\n      // this is a very hot path, and fully deterministic.\n      const memoOpts = (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) | (this.options.loose && FLAG_LOOSE);\n      const memoKey = memoOpts + ':' + range;\n      const cached = cache.get(memoKey);\n      if (cached) {\n        return cached;\n      }\n      const loose = this.options.loose;\n      // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n      const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE];\n      range = range.replace(hr, hyphenReplace(this.options.includePrerelease));\n      debug('hyphen replace', range);\n      // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n      range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace);\n      debug('comparator trim', range);\n\n      // `~ 1.2.3` => `~1.2.3`\n      range = range.replace(re[t.TILDETRIM], tildeTrimReplace);\n\n      // `^ 1.2.3` => `^1.2.3`\n      range = range.replace(re[t.CARETTRIM], caretTrimReplace);\n\n      // normalize spaces\n      range = range.split(/\\s+/).join(' ');\n\n      // At this point, the range is completely trimmed and\n      // ready to be split into comparators.\n\n      let rangeList = range.split(' ').map(comp => parseComparator(comp, this.options)).join(' ').split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options));\n      if (loose) {\n        // in loose mode, throw out any that are not valid comparators\n        rangeList = rangeList.filter(comp => {\n          debug('loose invalid filter', comp, this.options);\n          return !!comp.match(re[t.COMPARATORLOOSE]);\n        });\n      }\n      debug('range list', rangeList);\n\n      // if any comparators are the null set, then replace with JUST null set\n      // if more than one comparator, remove any * comparators\n      // also, don't include the same comparator more than once\n      const rangeMap = new Map();\n      const comparators = rangeList.map(comp => new Comparator(comp, this.options));\n      for (const comp of comparators) {\n        if (isNullSet(comp)) {\n          return [comp];\n        }\n        rangeMap.set(comp.value, comp);\n      }\n      if (rangeMap.size > 1 && rangeMap.has('')) {\n        rangeMap.delete('');\n      }\n      const result = [...rangeMap.values()];\n      cache.set(memoKey, result);\n      return result;\n    }\n    intersects(range, options) {\n      if (!(range instanceof Range)) {\n        throw new TypeError('a Range is required');\n      }\n      return this.set.some(thisComparators => {\n        return isSatisfiable(thisComparators, options) && range.set.some(rangeComparators => {\n          return isSatisfiable(rangeComparators, options) && thisComparators.every(thisComparator => {\n            return rangeComparators.every(rangeComparator => {\n              return thisComparator.intersects(rangeComparator, options);\n            });\n          });\n        });\n      });\n    }\n\n    // if ANY of the sets match ALL of its comparators, then pass\n    test(version) {\n      if (!version) {\n        return false;\n      }\n      if (typeof version === 'string') {\n        try {\n          version = new SemVer(version, this.options);\n        } catch (er) {\n          return false;\n        }\n      }\n      for (let i = 0; i < this.set.length; i++) {\n        if (testSet(this.set[i], version, this.options)) {\n          return true;\n        }\n      }\n      return false;\n    }\n  }\n  range = Range;\n  const LRU = lruCache;\n  const cache = new LRU({\n    max: 1000\n  });\n  const parseOptions = parseOptions_1;\n  const Comparator = requireComparator();\n  const debug = debug_1;\n  const SemVer = semver;\n  const {\n    re,\n    t,\n    comparatorTrimReplace,\n    tildeTrimReplace,\n    caretTrimReplace\n  } = reExports;\n  const {\n    FLAG_INCLUDE_PRERELEASE,\n    FLAG_LOOSE\n  } = constants;\n  const isNullSet = c => c.value === '<0.0.0-0';\n  const isAny = c => c.value === '';\n\n  // take a set of comparators and determine whether there\n  // exists a version which can satisfy it\n  const isSatisfiable = (comparators, options) => {\n    let result = true;\n    const remainingComparators = comparators.slice();\n    let testComparator = remainingComparators.pop();\n    while (result && remainingComparators.length) {\n      result = remainingComparators.every(otherComparator => {\n        return testComparator.intersects(otherComparator, options);\n      });\n      testComparator = remainingComparators.pop();\n    }\n    return result;\n  };\n\n  // comprised of xranges, tildes, stars, and gtlt's at this point.\n  // already replaced the hyphen ranges\n  // turn into a set of JUST comparators.\n  const parseComparator = (comp, options) => {\n    debug('comp', comp, options);\n    comp = replaceCarets(comp, options);\n    debug('caret', comp);\n    comp = replaceTildes(comp, options);\n    debug('tildes', comp);\n    comp = replaceXRanges(comp, options);\n    debug('xrange', comp);\n    comp = replaceStars(comp, options);\n    debug('stars', comp);\n    return comp;\n  };\n  const isX = id => !id || id.toLowerCase() === 'x' || id === '*';\n\n  // ~, ~> --> * (any, kinda silly)\n  // ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n  // ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n  // ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n  // ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n  // ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n  // ~0.0.1 --> >=0.0.1 <0.1.0-0\n  const replaceTildes = (comp, options) => comp.trim().split(/\\s+/).map(c => {\n    return replaceTilde(c, options);\n  }).join(' ');\n  const replaceTilde = (comp, options) => {\n    const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE];\n    return comp.replace(r, (_, M, m, p, pr) => {\n      debug('tilde', comp, _, M, m, p, pr);\n      let ret;\n      if (isX(M)) {\n        ret = '';\n      } else if (isX(m)) {\n        ret = `>=${M}.0.0 <${+M + 1}.0.0-0`;\n      } else if (isX(p)) {\n        // ~1.2 == >=1.2.0 <1.3.0-0\n        ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`;\n      } else if (pr) {\n        debug('replaceTilde pr', pr);\n        ret = `>=${M}.${m}.${p}-${pr} <${M}.${+m + 1}.0-0`;\n      } else {\n        // ~1.2.3 == >=1.2.3 <1.3.0-0\n        ret = `>=${M}.${m}.${p} <${M}.${+m + 1}.0-0`;\n      }\n      debug('tilde return', ret);\n      return ret;\n    });\n  };\n\n  // ^ --> * (any, kinda silly)\n  // ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n  // ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n  // ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n  // ^1.2.3 --> >=1.2.3 <2.0.0-0\n  // ^1.2.0 --> >=1.2.0 <2.0.0-0\n  // ^0.0.1 --> >=0.0.1 <0.0.2-0\n  // ^0.1.0 --> >=0.1.0 <0.2.0-0\n  const replaceCarets = (comp, options) => comp.trim().split(/\\s+/).map(c => {\n    return replaceCaret(c, options);\n  }).join(' ');\n  const replaceCaret = (comp, options) => {\n    debug('caret', comp, options);\n    const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET];\n    const z = options.includePrerelease ? '-0' : '';\n    return comp.replace(r, (_, M, m, p, pr) => {\n      debug('caret', comp, _, M, m, p, pr);\n      let ret;\n      if (isX(M)) {\n        ret = '';\n      } else if (isX(m)) {\n        ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`;\n      } else if (isX(p)) {\n        if (M === '0') {\n          ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`;\n        } else {\n          ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`;\n        }\n      } else if (pr) {\n        debug('replaceCaret pr', pr);\n        if (M === '0') {\n          if (m === '0') {\n            ret = `>=${M}.${m}.${p}-${pr} <${M}.${m}.${+p + 1}-0`;\n          } else {\n            ret = `>=${M}.${m}.${p}-${pr} <${M}.${+m + 1}.0-0`;\n          }\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr} <${+M + 1}.0.0-0`;\n        }\n      } else {\n        debug('no pr');\n        if (M === '0') {\n          if (m === '0') {\n            ret = `>=${M}.${m}.${p}${z} <${M}.${m}.${+p + 1}-0`;\n          } else {\n            ret = `>=${M}.${m}.${p}${z} <${M}.${+m + 1}.0-0`;\n          }\n        } else {\n          ret = `>=${M}.${m}.${p} <${+M + 1}.0.0-0`;\n        }\n      }\n      debug('caret return', ret);\n      return ret;\n    });\n  };\n  const replaceXRanges = (comp, options) => {\n    debug('replaceXRanges', comp, options);\n    return comp.split(/\\s+/).map(c => {\n      return replaceXRange(c, options);\n    }).join(' ');\n  };\n  const replaceXRange = (comp, options) => {\n    comp = comp.trim();\n    const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE];\n    return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n      debug('xRange', comp, ret, gtlt, M, m, p, pr);\n      const xM = isX(M);\n      const xm = xM || isX(m);\n      const xp = xm || isX(p);\n      const anyX = xp;\n      if (gtlt === '=' && anyX) {\n        gtlt = '';\n      }\n\n      // if we're including prereleases in the match, then we need\n      // to fix this to -0, the lowest possible prerelease value\n      pr = options.includePrerelease ? '-0' : '';\n      if (xM) {\n        if (gtlt === '>' || gtlt === '<') {\n          // nothing is allowed\n          ret = '<0.0.0-0';\n        } else {\n          // nothing is forbidden\n          ret = '*';\n        }\n      } else if (gtlt && anyX) {\n        // we know patch is an x, because we have any x at all.\n        // replace X with 0\n        if (xm) {\n          m = 0;\n        }\n        p = 0;\n        if (gtlt === '>') {\n          // >1 => >=2.0.0\n          // >1.2 => >=1.3.0\n          gtlt = '>=';\n          if (xm) {\n            M = +M + 1;\n            m = 0;\n            p = 0;\n          } else {\n            m = +m + 1;\n            p = 0;\n          }\n        } else if (gtlt === '<=') {\n          // <=0.7.x is actually <0.8.0, since any 0.7.x should\n          // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n          gtlt = '<';\n          if (xm) {\n            M = +M + 1;\n          } else {\n            m = +m + 1;\n          }\n        }\n        if (gtlt === '<') {\n          pr = '-0';\n        }\n        ret = `${gtlt + M}.${m}.${p}${pr}`;\n      } else if (xm) {\n        ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`;\n      } else if (xp) {\n        ret = `>=${M}.${m}.0${pr} <${M}.${+m + 1}.0-0`;\n      }\n      debug('xRange return', ret);\n      return ret;\n    });\n  };\n\n  // Because * is AND-ed with everything else in the comparator,\n  // and '' means \"any version\", just remove the *s entirely.\n  const replaceStars = (comp, options) => {\n    debug('replaceStars', comp, options);\n    // Looseness is ignored here.  star is always as loose as it gets!\n    return comp.trim().replace(re[t.STAR], '');\n  };\n  const replaceGTE0 = (comp, options) => {\n    debug('replaceGTE0', comp, options);\n    return comp.trim().replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '');\n  };\n\n  // This function is passed to string.replace(re[t.HYPHENRANGE])\n  // M, m, patch, prerelease, build\n  // 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n  // 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n  // 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n  const hyphenReplace = incPr => ($0, from, fM, fm, fp, fpr, fb, to, tM, tm, tp, tpr, tb) => {\n    if (isX(fM)) {\n      from = '';\n    } else if (isX(fm)) {\n      from = `>=${fM}.0.0${incPr ? '-0' : ''}`;\n    } else if (isX(fp)) {\n      from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`;\n    } else if (fpr) {\n      from = `>=${from}`;\n    } else {\n      from = `>=${from}${incPr ? '-0' : ''}`;\n    }\n    if (isX(tM)) {\n      to = '';\n    } else if (isX(tm)) {\n      to = `<${+tM + 1}.0.0-0`;\n    } else if (isX(tp)) {\n      to = `<${tM}.${+tm + 1}.0-0`;\n    } else if (tpr) {\n      to = `<=${tM}.${tm}.${tp}-${tpr}`;\n    } else if (incPr) {\n      to = `<${tM}.${tm}.${+tp + 1}-0`;\n    } else {\n      to = `<=${to}`;\n    }\n    return `${from} ${to}`.trim();\n  };\n  const testSet = (set, version, options) => {\n    for (let i = 0; i < set.length; i++) {\n      if (!set[i].test(version)) {\n        return false;\n      }\n    }\n    if (version.prerelease.length && !options.includePrerelease) {\n      // Find the set of versions that are allowed to have prereleases\n      // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n      // That should allow `1.2.3-pr.2` to pass.\n      // However, `1.2.4-alpha.notready` should NOT be allowed,\n      // even though it's within the range set by the comparators.\n      for (let i = 0; i < set.length; i++) {\n        debug(set[i].semver);\n        if (set[i].semver === Comparator.ANY) {\n          continue;\n        }\n        if (set[i].semver.prerelease.length > 0) {\n          const allowed = set[i].semver;\n          if (allowed.major === version.major && allowed.minor === version.minor && allowed.patch === version.patch) {\n            return true;\n          }\n        }\n      }\n\n      // Version has a -pre, but it's not one of the ones we like.\n      return false;\n    }\n    return true;\n  };\n  return range;\n}\nconst Range = requireRange();\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options);\n  } catch (er) {\n    return false;\n  }\n  return range.test(version);\n};\nvar satisfies_1 = satisfies;\nvar satisfies$1 = /*@__PURE__*/getDefaultExportFromCjs(satisfies_1);\n\n/**\n * Open editor url in a new window, and pass a message.\n */\nfunction post(window, url, data) {\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const editor = window.open(url);\n  const wait = 10_000;\n  const step = 250;\n  const {\n    origin\n  } = new URL(url);\n  // eslint-disable-next-line no-bitwise\n  let count = ~~(wait / step);\n  function listen(evt) {\n    if (evt.source === editor) {\n      count = 0;\n      window.removeEventListener('message', listen, false);\n    }\n  }\n  window.addEventListener('message', listen, false);\n\n  // send message\n  // periodically resend until ack received or timeout\n  function send() {\n    if (count <= 0) {\n      return;\n    }\n    editor.postMessage(data, origin);\n    setTimeout(send, step);\n    count -= 1;\n  }\n  setTimeout(send, step);\n}\n\n// generated with build-style.sh\nvar embedStyle = `.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: \"\";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n`;\nfunction mergeDeep(dest, ...src) {\n  for (const s of src) {\n    deepMerge_(dest, s);\n  }\n  return dest;\n}\nfunction deepMerge_(dest, src) {\n  for (const property of Object.keys(src)) {\n    writeConfig(dest, property, src[property], true);\n  }\n}\nvar name = \"vega-embed\";\nvar version$1 = \"6.22.1\";\nvar description = \"Publish Vega visualizations as embedded web components.\";\nvar keywords = [\"vega\", \"data\", \"visualization\", \"component\", \"embed\"];\nvar repository = {\n  type: \"git\",\n  url: \"http://github.com/vega/vega-embed.git\"\n};\nvar author = {\n  name: \"UW Interactive Data Lab\",\n  url: \"http://idl.cs.washington.edu\"\n};\nvar contributors = [{\n  name: \"Dominik Moritz\",\n  url: \"https://www.domoritz.de\"\n}];\nvar bugs = {\n  url: \"https://github.com/vega/vega-embed/issues\"\n};\nvar homepage = \"https://github.com/vega/vega-embed#readme\";\nvar license = \"BSD-3-Clause\";\nvar main = \"build/vega-embed.js\";\nvar module = \"build/vega-embed.module.js\";\nvar unpkg = \"build/vega-embed.min.js\";\nvar jsdelivr = \"build/vega-embed.min.js\";\nvar types = \"build/vega-embed.module.d.ts\";\nvar files = [\"src\", \"build\", \"patches\"];\nvar devDependencies = {\n  \"@babel/core\": \"^7.21.4\",\n  \"@babel/plugin-transform-runtime\": \"^7.21.4\",\n  \"@babel/preset-env\": \"^7.21.4\",\n  \"@babel/preset-typescript\": \"^7.21.4\",\n  \"@release-it/conventional-changelog\": \"^5.1.1\",\n  \"@rollup/plugin-commonjs\": \"24.1.0\",\n  \"@rollup/plugin-json\": \"^6.0.0\",\n  \"@rollup/plugin-node-resolve\": \"^15.0.2\",\n  \"@rollup/plugin-terser\": \"^0.4.1\",\n  \"@types/semver\": \"^7.3.13\",\n  \"@typescript-eslint/eslint-plugin\": \"^5.59.0\",\n  \"@typescript-eslint/parser\": \"^5.59.0\",\n  \"browser-sync\": \"^2.29.1\",\n  concurrently: \"^8.0.1\",\n  \"del-cli\": \"^5.0.0\",\n  eslint: \"^8.38.0\",\n  \"eslint-config-prettier\": \"^8.8.0\",\n  \"eslint-plugin-jest\": \"^27.2.1\",\n  \"eslint-plugin-prettier\": \"^4.2.1\",\n  jest: \"^29.5.0\",\n  \"jest-canvas-mock\": \"^2.5.0\",\n  \"jest-environment-jsdom\": \"^29.5.0\",\n  \"patch-package\": \"^6.5.1\",\n  \"postinstall-postinstall\": \"^2.1.0\",\n  prettier: \"^2.8.7\",\n  \"release-it\": \"^15.10.1\",\n  rollup: \"3.20.6\",\n  \"rollup-plugin-bundle-size\": \"^1.0.3\",\n  \"rollup-plugin-ts\": \"^3.2.0\",\n  sass: \"^1.62.0\",\n  typescript: \"^5.0.4\",\n  vega: \"^5.22.1\",\n  \"vega-lite\": \"^5.2.0\"\n};\nvar peerDependencies = {\n  vega: \"^5.21.0\",\n  \"vega-lite\": \"*\"\n};\nvar dependencies = {\n  \"fast-json-patch\": \"^3.1.1\",\n  \"json-stringify-pretty-compact\": \"^3.0.0\",\n  semver: \"~7.4.0\",\n  tslib: \"^2.5.0\",\n  \"vega-interpreter\": \"^1.0.5\",\n  \"vega-schema-url-parser\": \"^2.2.0\",\n  \"vega-themes\": \"^2.13.0\",\n  \"vega-tooltip\": \"^0.32.0\"\n};\nvar bundledDependencies = [\"yallist\"];\nvar scripts = {\n  prebuild: \"yarn clean && yarn build:style\",\n  build: \"rollup -c\",\n  \"build:style\": \"./build-style.sh\",\n  clean: \"del-cli build src/style.ts\",\n  prepublishOnly: \"yarn clean && yarn build\",\n  preversion: \"yarn lint && yarn test\",\n  serve: \"browser-sync start --directory -s -f build *.html\",\n  start: \"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'\",\n  pretest: \"yarn build:style\",\n  test: \"jest\",\n  \"test:inspect\": \"node --inspect-brk ./node_modules/.bin/jest --runInBand\",\n  prettierbase: \"prettier '*.{css,scss,html}'\",\n  format: \"eslint . --fix && yarn prettierbase --write\",\n  lint: \"eslint . && yarn prettierbase --check\",\n  release: \"release-it\"\n};\nvar pkg = {\n  name: name,\n  version: version$1,\n  description: description,\n  keywords: keywords,\n  repository: repository,\n  author: author,\n  contributors: contributors,\n  bugs: bugs,\n  homepage: homepage,\n  license: license,\n  main: main,\n  module: module,\n  unpkg: unpkg,\n  jsdelivr: jsdelivr,\n  types: types,\n  files: files,\n  devDependencies: devDependencies,\n  peerDependencies: peerDependencies,\n  dependencies: dependencies,\n  bundledDependencies: bundledDependencies,\n  scripts: scripts\n};\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nconst version = pkg.version;\nconst vega = vegaImport;\nlet vegaLite = vegaLiteImport;\n\n// For backwards compatibility with Vega-Lite before v4.\nconst w = typeof window !== 'undefined' ? window : undefined;\nif (vegaLite === undefined && w?.vl?.compile) {\n  vegaLite = w.vl;\n}\nconst DEFAULT_ACTIONS = {\n  export: {\n    svg: true,\n    png: true\n  },\n  source: true,\n  compiled: true,\n  editor: true\n};\nconst I18N = {\n  CLICK_TO_VIEW_ACTIONS: 'Click to view actions',\n  COMPILED_ACTION: 'View Compiled Vega',\n  EDITOR_ACTION: 'Open in Vega Editor',\n  PNG_ACTION: 'Save as PNG',\n  SOURCE_ACTION: 'View Source',\n  SVG_ACTION: 'Save as SVG'\n};\nconst NAMES = {\n  vega: 'Vega',\n  'vega-lite': 'Vega-Lite'\n};\nconst VERSION = {\n  vega: vega.version,\n  'vega-lite': vegaLite ? vegaLite.version : 'not available'\n};\nconst PREPROCESSOR = {\n  vega: vgSpec => vgSpec,\n  'vega-lite': (vlSpec, config) => vegaLite.compile(vlSpec, {\n    config: config\n  }).spec\n};\nconst SVG_CIRCLES = `\n<svg viewBox=\"0 0 16 16\" fill=\"currentColor\" stroke=\"none\" stroke-width=\"1\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n  <circle r=\"2\" cy=\"8\" cx=\"2\"></circle>\n  <circle r=\"2\" cy=\"8\" cx=\"8\"></circle>\n  <circle r=\"2\" cy=\"8\" cx=\"14\"></circle>\n</svg>`;\nconst CHART_WRAPPER_CLASS = 'chart-wrapper';\nfunction isTooltipHandler(h) {\n  return typeof h === 'function';\n}\nfunction viewSource(source, sourceHeader, sourceFooter, mode) {\n  const header = `<html><head>${sourceHeader}</head><body><pre><code class=\"json\">`;\n  const footer = `</code></pre>${sourceFooter}</body></html>`;\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const win = window.open('');\n  win.document.write(header + source + footer);\n  win.document.title = `${NAMES[mode]} JSON Source`;\n}\n\n/**\n * Try to guess the type of spec.\n *\n * @param spec Vega or Vega-Lite spec.\n */\nfunction guessMode(spec, providedMode) {\n  // Decide mode\n  if (spec.$schema) {\n    const parsed = schemaParser(spec.$schema);\n    if (providedMode && providedMode !== parsed.library) {\n      console.warn(`The given visualization spec is written in ${NAMES[parsed.library]}, but mode argument sets ${NAMES[providedMode] ?? providedMode}.`);\n    }\n    const mode = parsed.library;\n    if (!satisfies$1(VERSION[mode], `^${parsed.version.slice(1)}`)) {\n      console.warn(`The input spec uses ${NAMES[mode]} ${parsed.version}, but the current version of ${NAMES[mode]} is v${VERSION[mode]}.`);\n    }\n    return mode;\n  }\n\n  // try to guess from the provided spec\n  if ('mark' in spec || 'encoding' in spec || 'layer' in spec || 'hconcat' in spec || 'vconcat' in spec || 'facet' in spec || 'repeat' in spec) {\n    return 'vega-lite';\n  }\n  if ('marks' in spec || 'signals' in spec || 'scales' in spec || 'axes' in spec) {\n    return 'vega';\n  }\n  return providedMode ?? 'vega';\n}\nfunction isLoader(o) {\n  return !!(o && 'load' in o);\n}\nfunction createLoader(opts) {\n  return isLoader(opts) ? opts : vega.loader(opts);\n}\nfunction embedOptionsFromUsermeta(parsedSpec) {\n  const opts = parsedSpec.usermeta?.embedOptions ?? {};\n  if (isString(opts.defaultStyle)) {\n    // we don't allow styles set via usermeta since it would allow injection of logic (we set the style via innerHTML)\n    opts.defaultStyle = false;\n  }\n  return opts;\n}\n\n/**\n * Embed a Vega visualization component in a web page. This function returns a promise.\n *\n * @param el        DOM element in which to place component (DOM node or CSS selector).\n * @param spec      String : A URL string from which to load the Vega specification.\n *                  Object : The Vega/Vega-Lite specification as a parsed JSON object.\n * @param opts       A JavaScript object containing options for embedding.\n */\nasync function embed(el, spec, opts = {}) {\n  let parsedSpec;\n  let loader;\n  if (isString(spec)) {\n    loader = createLoader(opts.loader);\n    parsedSpec = JSON.parse(await loader.load(spec));\n  } else {\n    parsedSpec = spec;\n  }\n  const loadedEmbedOptions = embedOptionsFromUsermeta(parsedSpec);\n  const usermetaLoader = loadedEmbedOptions.loader;\n\n  // either create the loader for the first time or create a new loader if the spec has new loader options\n  if (!loader || usermetaLoader) {\n    loader = createLoader(opts.loader ?? usermetaLoader);\n  }\n  const usermetaOpts = await loadOpts(loadedEmbedOptions, loader);\n  const parsedOpts = await loadOpts(opts, loader);\n  const mergedOpts = _objectSpread(_objectSpread({}, mergeDeep(parsedOpts, usermetaOpts)), {}, {\n    config: mergeConfig(parsedOpts.config ?? {}, usermetaOpts.config ?? {})\n  });\n  return await _embed(el, parsedSpec, mergedOpts, loader);\n}\nasync function loadOpts(opt, loader) {\n  const config = isString(opt.config) ? JSON.parse(await loader.load(opt.config)) : opt.config ?? {};\n  const patch = isString(opt.patch) ? JSON.parse(await loader.load(opt.patch)) : opt.patch;\n  return _objectSpread(_objectSpread(_objectSpread({}, opt), patch ? {\n    patch\n  } : {}), config ? {\n    config\n  } : {});\n}\nfunction getRoot(el) {\n  const possibleRoot = el.getRootNode ? el.getRootNode() : document;\n  return possibleRoot instanceof ShadowRoot ? {\n    root: possibleRoot,\n    rootContainer: possibleRoot\n  } : {\n    root: document,\n    rootContainer: document.head ?? document.body\n  };\n}\nasync function _embed(el, spec, opts = {}, loader) {\n  const config = opts.theme ? mergeConfig(themes[opts.theme], opts.config ?? {}) : opts.config;\n  const actions = isBoolean(opts.actions) ? opts.actions : mergeDeep({}, DEFAULT_ACTIONS, opts.actions ?? {});\n  const i18n = _objectSpread(_objectSpread({}, I18N), opts.i18n);\n  const renderer = opts.renderer ?? 'canvas';\n  const logLevel = opts.logLevel ?? vega.Warn;\n  const downloadFileName = opts.downloadFileName ?? 'visualization';\n  const element = typeof el === 'string' ? document.querySelector(el) : el;\n  if (!element) {\n    throw new Error(`${el} does not exist`);\n  }\n  if (opts.defaultStyle !== false) {\n    const ID = 'vega-embed-style';\n    const {\n      root,\n      rootContainer\n    } = getRoot(element);\n    if (!root.getElementById(ID)) {\n      const style = document.createElement('style');\n      style.id = ID;\n      style.innerHTML = opts.defaultStyle === undefined || opts.defaultStyle === true ? embedStyle.toString() : opts.defaultStyle;\n      rootContainer.appendChild(style);\n    }\n  }\n  const mode = guessMode(spec, opts.mode);\n  let vgSpec = PREPROCESSOR[mode](spec, config);\n  if (mode === 'vega-lite') {\n    if (vgSpec.$schema) {\n      const parsed = schemaParser(vgSpec.$schema);\n      if (!satisfies$1(VERSION.vega, `^${parsed.version.slice(1)}`)) {\n        console.warn(`The compiled spec uses Vega ${parsed.version}, but current version is v${VERSION.vega}.`);\n      }\n    }\n  }\n  element.classList.add('vega-embed');\n  if (actions) {\n    element.classList.add('has-actions');\n  }\n  element.innerHTML = ''; // clear container\n\n  let container = element;\n  if (actions) {\n    const chartWrapper = document.createElement('div');\n    chartWrapper.classList.add(CHART_WRAPPER_CLASS);\n    element.appendChild(chartWrapper);\n    container = chartWrapper;\n  }\n  const patch = opts.patch;\n  if (patch) {\n    vgSpec = patch instanceof Function ? patch(vgSpec) : applyPatch(vgSpec, patch, true, false).newDocument;\n  }\n\n  // Set locale. Note that this is a global setting.\n  if (opts.formatLocale) {\n    vega.formatLocale(opts.formatLocale);\n  }\n  if (opts.timeFormatLocale) {\n    vega.timeFormatLocale(opts.timeFormatLocale);\n  }\n\n  // Set custom expression functions\n  if (opts.expressionFunctions) {\n    for (const name in opts.expressionFunctions) {\n      const expressionFunction = opts.expressionFunctions[name];\n      if ('fn' in expressionFunction) {\n        vega.expressionFunction(name, expressionFunction.fn, expressionFunction['visitor']);\n      } else if (expressionFunction instanceof Function) {\n        vega.expressionFunction(name, expressionFunction);\n      }\n    }\n  }\n  const {\n    ast\n  } = opts;\n\n  // Do not apply the config to Vega when we have already applied it to Vega-Lite.\n  // This call may throw an Error if parsing fails.\n  const runtime = vega.parse(vgSpec, mode === 'vega-lite' ? {} : config, {\n    ast\n  });\n  const view = new (opts.viewClass || vega.View)(runtime, _objectSpread({\n    loader,\n    logLevel,\n    renderer\n  }, ast ? {\n    expr: vega.expressionInterpreter ?? opts.expr ?? expressionInterpreter\n  } : {}));\n  view.addSignalListener('autosize', (_, autosize) => {\n    const {\n      type\n    } = autosize;\n    if (type == 'fit-x') {\n      container.classList.add('fit-x');\n      container.classList.remove('fit-y');\n    } else if (type == 'fit-y') {\n      container.classList.remove('fit-x');\n      container.classList.add('fit-y');\n    } else if (type == 'fit') {\n      container.classList.add('fit-x', 'fit-y');\n    } else {\n      container.classList.remove('fit-x', 'fit-y');\n    }\n  });\n  if (opts.tooltip !== false) {\n    const handler = isTooltipHandler(opts.tooltip) ? opts.tooltip :\n    // user provided boolean true or tooltip options\n    new Handler(opts.tooltip === true ? {} : opts.tooltip).call;\n    view.tooltip(handler);\n  }\n  let {\n    hover\n  } = opts;\n  if (hover === undefined) {\n    hover = mode === 'vega';\n  }\n  if (hover) {\n    const {\n      hoverSet,\n      updateSet\n    } = typeof hover === 'boolean' ? {} : hover;\n    view.hover(hoverSet, updateSet);\n  }\n  if (opts) {\n    if (opts.width != null) {\n      view.width(opts.width);\n    }\n    if (opts.height != null) {\n      view.height(opts.height);\n    }\n    if (opts.padding != null) {\n      view.padding(opts.padding);\n    }\n  }\n  await view.initialize(container, opts.bind).runAsync();\n  let documentClickHandler;\n  if (actions !== false) {\n    let wrapper = element;\n    if (opts.defaultStyle !== false) {\n      const details = document.createElement('details');\n      details.title = i18n.CLICK_TO_VIEW_ACTIONS;\n      element.append(details);\n      wrapper = details;\n      const summary = document.createElement('summary');\n      summary.innerHTML = SVG_CIRCLES;\n      details.append(summary);\n      documentClickHandler = ev => {\n        if (!details.contains(ev.target)) {\n          details.removeAttribute('open');\n        }\n      };\n      document.addEventListener('click', documentClickHandler);\n    }\n    const ctrl = document.createElement('div');\n    wrapper.append(ctrl);\n    ctrl.classList.add('vega-actions');\n\n    // add 'Export' action\n    if (actions === true || actions.export !== false) {\n      for (const ext of ['svg', 'png']) {\n        if (actions === true || actions.export === true || actions.export[ext]) {\n          const i18nExportAction = i18n[`${ext.toUpperCase()}_ACTION`];\n          const exportLink = document.createElement('a');\n          const scaleFactor = isObject(opts.scaleFactor) ? opts.scaleFactor[ext] : opts.scaleFactor;\n          exportLink.text = i18nExportAction;\n          exportLink.href = '#';\n          exportLink.target = '_blank';\n          exportLink.download = `${downloadFileName}.${ext}`;\n          // add link on mousedown so that it's correct when the click happens\n          exportLink.addEventListener('mousedown', async function (e) {\n            e.preventDefault();\n            const url = await view.toImageURL(ext, scaleFactor);\n            this.href = url;\n          });\n          ctrl.append(exportLink);\n        }\n      }\n    }\n\n    // add 'View Source' action\n    if (actions === true || actions.source !== false) {\n      const viewSourceLink = document.createElement('a');\n      viewSourceLink.text = i18n.SOURCE_ACTION;\n      viewSourceLink.href = '#';\n      viewSourceLink.addEventListener('click', function (e) {\n        viewSource(stringify(spec), opts.sourceHeader ?? '', opts.sourceFooter ?? '', mode);\n        e.preventDefault();\n      });\n      ctrl.append(viewSourceLink);\n    }\n\n    // add 'View Compiled' action\n    if (mode === 'vega-lite' && (actions === true || actions.compiled !== false)) {\n      const compileLink = document.createElement('a');\n      compileLink.text = i18n.COMPILED_ACTION;\n      compileLink.href = '#';\n      compileLink.addEventListener('click', function (e) {\n        viewSource(stringify(vgSpec), opts.sourceHeader ?? '', opts.sourceFooter ?? '', 'vega');\n        e.preventDefault();\n      });\n      ctrl.append(compileLink);\n    }\n\n    // add 'Open in Vega Editor' action\n    if (actions === true || actions.editor !== false) {\n      const editorUrl = opts.editorUrl ?? 'https://vega.github.io/editor/';\n      const editorLink = document.createElement('a');\n      editorLink.text = i18n.EDITOR_ACTION;\n      editorLink.href = '#';\n      editorLink.addEventListener('click', function (e) {\n        post(window, editorUrl, {\n          config: config,\n          mode,\n          renderer,\n          spec: stringify(spec)\n        });\n        e.preventDefault();\n      });\n      ctrl.append(editorLink);\n    }\n  }\n  function finalize() {\n    if (documentClickHandler) {\n      document.removeEventListener('click', documentClickHandler);\n    }\n    view.finalize();\n  }\n  return {\n    view,\n    spec,\n    vgSpec,\n    finalize,\n    embedOptions: opts\n  };\n}\nexport { DEFAULT_ACTIONS, embed as default, guessMode, vega, vegaLite, version };","map":{"version":3,"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_toPrimitive","input","hint","prim","toPrimitive","undefined","res","call","TypeError","String","Number","_toPropertyKey","arg","key","_defineProperty","value","Object","defineProperty","enumerable","configurable","writable","Yallist","walker","head","next","yallist","Yallist$1","Node","create","list","self","tail","length","forEach","item","push","arguments","i","l","removeNode","node","Error","prev","unshiftNode","pushNode","unshift","pop","shift","fn","thisp","forEachReverse","get","n","getReverse","map","mapReverse","reduce","initial","acc","reduceReverse","toArray","arr","Array","toArrayReverse","slice","from","to","ret","sliceReverse","splice","start","deleteCount","nodes","insert","reverse","p","inserted","requireIterator","er","MAX","LENGTH","LENGTH_CALCULATOR","ALLOW_STALE","MAX_AGE","DISPOSE","NO_DISPOSE_ON_SET","LRU_LIST","CACHE","UPDATE_AGE_ON_GET","naiveLength","LRUCache","options","max","Infinity","lc","stale","maxAge","dispose","noDisposeOnSet","updateAgeOnGet","reset","mL","trim","allowStale","mA","lengthCalculator","lC","hit","itemCount","rforEach","forEachStep","keys","k","values","Map","dump","isStale","v","e","now","filter","h","dumpLru","set","Date","len","has","del","Entry","peek","load","expiresAt","prune","doUse","diff","delete","lruCache","looseOption","freeze","loose","emptyOpts","parseOptions$1","parseOptions_1","SEMVER_SPEC_VERSION","MAX_LENGTH$1","MAX_SAFE_INTEGER$1","MAX_SAFE_INTEGER","MAX_SAFE_COMPONENT_LENGTH","RELEASE_TYPES","constants","FLAG_INCLUDE_PRERELEASE","FLAG_LOOSE","debug$1","process","env","NODE_DEBUG","test","args","console","error","debug_1","debug","exports","module","re","src","t","R","createToken","name","isGlobal","index","RegExp","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","PRERELEASE","BUILD","FULLPLAIN","MAINVERSIONLOOSE","PRERELEASELOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","COERCE","LONETILDE","tildeTrimReplace","LONECARET","caretTrimReplace","comparatorTrimReplace","numeric","compareIdentifiers$1","a","b","anum","bnum","rcompareIdentifiers","identifiers","MAX_LENGTH","reExports","parseOptions","compareIdentifiers","SemVer","version","includePrerelease","m","match","LOOSE","FULL","raw","major","minor","patch","prerelease","split","id","num","build","format","join","toString","compare","other","compareMain","comparePre","compareBuild","inc","release","identifier","identifierBase","base","isNaN","semver","SemVer$1","compare$6","compare_1","compare$5","eq$1","eq_1","compare$4","neq$1","neq_1","compare$3","gt$1","gt_1","compare$2","gte$1","gte_1","compare$1","lt$1","lt_1","lte$1","lte_1","eq","neq","gt","gte","lt","lte","cmp","op","cmp_1","ANY","Comparator","comp","parse","operator","r","COMPARATORLOOSE","COMPARATOR","intersects","Range","startsWith","includes","comparator","requireRange","range","parseRange","c","first","isNullSet","isAny","comps","memoOpts","memoKey","cached","cache","hr","HYPHENRANGELOOSE","HYPHENRANGE","replace","hyphenReplace","COMPARATORTRIM","TILDETRIM","CARETTRIM","rangeList","parseComparator","replaceGTE0","rangeMap","comparators","size","result","some","thisComparators","isSatisfiable","rangeComparators","every","thisComparator","rangeComparator","testSet","LRU","requireComparator","remainingComparators","testComparator","otherComparator","replaceCarets","replaceTildes","replaceXRanges","replaceStars","isX","toLowerCase","replaceTilde","TILDELOOSE","TILDE","_","M","pr","replaceCaret","CARETLOOSE","CARET","z","replaceXRange","XRANGELOOSE","XRANGE","gtlt","xM","xm","xp","anyX","STAR","GTE0PRE","GTE0","incPr","$0","fM","fm","fp","fpr","fb","tM","tm","tp","tpr","tb","allowed","satisfies","satisfies_1","post","window","url","data","editor","open","wait","step","origin","URL","count","listen","evt","source","removeEventListener","addEventListener","send","postMessage","setTimeout","embedStyle","mergeDeep","dest","s","deepMerge_","property","writeConfig","pkg","vega","vegaImport","vegaLite","vegaLiteImport","w","vl","compile","DEFAULT_ACTIONS","export","svg","png","compiled","I18N","CLICK_TO_VIEW_ACTIONS","COMPILED_ACTION","EDITOR_ACTION","PNG_ACTION","SOURCE_ACTION","SVG_ACTION","NAMES","VERSION","PREPROCESSOR","vgSpec","vega-lite","vlSpec","config","spec","SVG_CIRCLES","CHART_WRAPPER_CLASS","isTooltipHandler","viewSource","sourceHeader","sourceFooter","mode","header","footer","win","document","write","title","guessMode","providedMode","$schema","parsed","schemaParser","library","warn","satisfies$1","isLoader","o","createLoader","opts","loader","embedOptionsFromUsermeta","parsedSpec","usermeta","embedOptions","isString","defaultStyle","embed","el","JSON","loadedEmbedOptions","usermetaLoader","usermetaOpts","loadOpts","parsedOpts","mergedOpts","_objectSpread","mergeConfig","_embed","opt","getRoot","possibleRoot","getRootNode","ShadowRoot","root","rootContainer","body","theme","themes","actions","isBoolean","i18n","renderer","logLevel","Warn","downloadFileName","element","querySelector","ID","getElementById","style","createElement","innerHTML","appendChild","classList","add","container","chartWrapper","Function","applyPatch","newDocument","formatLocale","timeFormatLocale","expressionFunctions","expressionFunction","ast","runtime","view","viewClass","View","expr","expressionInterpreter","addSignalListener","autosize","type","remove","tooltip","handler","Handler","hover","hoverSet","updateSet","width","height","padding","initialize","bind","runAsync","documentClickHandler","wrapper","details","append","summary","ev","contains","target","removeAttribute","ctrl","ext","i18nExportAction","toUpperCase","exportLink","scaleFactor","isObject","text","href","download","preventDefault","toImageURL","viewSourceLink","stringify","compileLink","editorUrl","editorLink","finalize"],"sources":["../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/yallist/iterator.js","../node_modules/yallist/yallist.js","../node_modules/lru-cache/index.js","../node_modules/semver/internal/parse-options.js","../node_modules/semver/internal/constants.js","../node_modules/semver/internal/debug.js","../node_modules/semver/internal/re.js","../node_modules/semver/internal/identifiers.js","../node_modules/semver/classes/semver.js","../node_modules/semver/functions/compare.js","../node_modules/semver/functions/eq.js","../node_modules/semver/functions/neq.js","../node_modules/semver/functions/gt.js","../node_modules/semver/functions/gte.js","../node_modules/semver/functions/lt.js","../node_modules/semver/functions/lte.js","../node_modules/semver/functions/cmp.js","../node_modules/semver/classes/comparator.js","../node_modules/semver/classes/range.js","../node_modules/semver/functions/satisfies.js","../src/post.ts","../src/style.ts","../src/util.ts","../src/embed.ts"],"sourcesContent":["export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","'use strict'\nmodule.exports = function (Yallist) {\n  Yallist.prototype[Symbol.iterator] = function* () {\n    for (let walker = this.head; walker; walker = walker.next) {\n      yield walker.value\n    }\n  }\n}\n","'use strict'\nmodule.exports = Yallist\n\nYallist.Node = Node\nYallist.create = Yallist\n\nfunction Yallist (list) {\n  var self = this\n  if (!(self instanceof Yallist)) {\n    self = new Yallist()\n  }\n\n  self.tail = null\n  self.head = null\n  self.length = 0\n\n  if (list && typeof list.forEach === 'function') {\n    list.forEach(function (item) {\n      self.push(item)\n    })\n  } else if (arguments.length > 0) {\n    for (var i = 0, l = arguments.length; i < l; i++) {\n      self.push(arguments[i])\n    }\n  }\n\n  return self\n}\n\nYallist.prototype.removeNode = function (node) {\n  if (node.list !== this) {\n    throw new Error('removing node which does not belong to this list')\n  }\n\n  var next = node.next\n  var prev = node.prev\n\n  if (next) {\n    next.prev = prev\n  }\n\n  if (prev) {\n    prev.next = next\n  }\n\n  if (node === this.head) {\n    this.head = next\n  }\n  if (node === this.tail) {\n    this.tail = prev\n  }\n\n  node.list.length--\n  node.next = null\n  node.prev = null\n  node.list = null\n\n  return next\n}\n\nYallist.prototype.unshiftNode = function (node) {\n  if (node === this.head) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var head = this.head\n  node.list = this\n  node.next = head\n  if (head) {\n    head.prev = node\n  }\n\n  this.head = node\n  if (!this.tail) {\n    this.tail = node\n  }\n  this.length++\n}\n\nYallist.prototype.pushNode = function (node) {\n  if (node === this.tail) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var tail = this.tail\n  node.list = this\n  node.prev = tail\n  if (tail) {\n    tail.next = node\n  }\n\n  this.tail = node\n  if (!this.head) {\n    this.head = node\n  }\n  this.length++\n}\n\nYallist.prototype.push = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    push(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.unshift = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    unshift(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.pop = function () {\n  if (!this.tail) {\n    return undefined\n  }\n\n  var res = this.tail.value\n  this.tail = this.tail.prev\n  if (this.tail) {\n    this.tail.next = null\n  } else {\n    this.head = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.shift = function () {\n  if (!this.head) {\n    return undefined\n  }\n\n  var res = this.head.value\n  this.head = this.head.next\n  if (this.head) {\n    this.head.prev = null\n  } else {\n    this.tail = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.head, i = 0; walker !== null; i++) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.next\n  }\n}\n\nYallist.prototype.forEachReverse = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.prev\n  }\n}\n\nYallist.prototype.get = function (n) {\n  for (var i = 0, walker = this.head; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.next\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.getReverse = function (n) {\n  for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.prev\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.map = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.head; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.next\n  }\n  return res\n}\n\nYallist.prototype.mapReverse = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.tail; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.prev\n  }\n  return res\n}\n\nYallist.prototype.reduce = function (fn, initial) {\n  var acc\n  var walker = this.head\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.head) {\n    walker = this.head.next\n    acc = this.head.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = 0; walker !== null; i++) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.next\n  }\n\n  return acc\n}\n\nYallist.prototype.reduceReverse = function (fn, initial) {\n  var acc\n  var walker = this.tail\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.tail) {\n    walker = this.tail.prev\n    acc = this.tail.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = this.length - 1; walker !== null; i--) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.prev\n  }\n\n  return acc\n}\n\nYallist.prototype.toArray = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.head; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.next\n  }\n  return arr\n}\n\nYallist.prototype.toArrayReverse = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.tail; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.prev\n  }\n  return arr\n}\n\nYallist.prototype.slice = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = 0, walker = this.head; walker !== null && i < from; i++) {\n    walker = walker.next\n  }\n  for (; walker !== null && i < to; i++, walker = walker.next) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.sliceReverse = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {\n    walker = walker.prev\n  }\n  for (; walker !== null && i > from; i--, walker = walker.prev) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.splice = function (start, deleteCount, ...nodes) {\n  if (start > this.length) {\n    start = this.length - 1\n  }\n  if (start < 0) {\n    start = this.length + start;\n  }\n\n  for (var i = 0, walker = this.head; walker !== null && i < start; i++) {\n    walker = walker.next\n  }\n\n  var ret = []\n  for (var i = 0; walker && i < deleteCount; i++) {\n    ret.push(walker.value)\n    walker = this.removeNode(walker)\n  }\n  if (walker === null) {\n    walker = this.tail\n  }\n\n  if (walker !== this.head && walker !== this.tail) {\n    walker = walker.prev\n  }\n\n  for (var i = 0; i < nodes.length; i++) {\n    walker = insert(this, walker, nodes[i])\n  }\n  return ret;\n}\n\nYallist.prototype.reverse = function () {\n  var head = this.head\n  var tail = this.tail\n  for (var walker = head; walker !== null; walker = walker.prev) {\n    var p = walker.prev\n    walker.prev = walker.next\n    walker.next = p\n  }\n  this.head = tail\n  this.tail = head\n  return this\n}\n\nfunction insert (self, node, value) {\n  var inserted = node === self.head ?\n    new Node(value, null, node, self) :\n    new Node(value, node, node.next, self)\n\n  if (inserted.next === null) {\n    self.tail = inserted\n  }\n  if (inserted.prev === null) {\n    self.head = inserted\n  }\n\n  self.length++\n\n  return inserted\n}\n\nfunction push (self, item) {\n  self.tail = new Node(item, self.tail, null, self)\n  if (!self.head) {\n    self.head = self.tail\n  }\n  self.length++\n}\n\nfunction unshift (self, item) {\n  self.head = new Node(item, null, self.head, self)\n  if (!self.tail) {\n    self.tail = self.head\n  }\n  self.length++\n}\n\nfunction Node (value, prev, next, list) {\n  if (!(this instanceof Node)) {\n    return new Node(value, prev, next, list)\n  }\n\n  this.list = list\n  this.value = value\n\n  if (prev) {\n    prev.next = this\n    this.prev = prev\n  } else {\n    this.prev = null\n  }\n\n  if (next) {\n    next.prev = this\n    this.next = next\n  } else {\n    this.next = null\n  }\n}\n\ntry {\n  // add if support for Symbol.iterator is present\n  require('./iterator.js')(Yallist)\n} catch (er) {}\n","'use strict'\n\n// A linked list to keep track of recently-used-ness\nconst Yallist = require('yallist')\n\nconst MAX = Symbol('max')\nconst LENGTH = Symbol('length')\nconst LENGTH_CALCULATOR = Symbol('lengthCalculator')\nconst ALLOW_STALE = Symbol('allowStale')\nconst MAX_AGE = Symbol('maxAge')\nconst DISPOSE = Symbol('dispose')\nconst NO_DISPOSE_ON_SET = Symbol('noDisposeOnSet')\nconst LRU_LIST = Symbol('lruList')\nconst CACHE = Symbol('cache')\nconst UPDATE_AGE_ON_GET = Symbol('updateAgeOnGet')\n\nconst naiveLength = () => 1\n\n// lruList is a yallist where the head is the youngest\n// item, and the tail is the oldest.  the list contains the Hit\n// objects as the entries.\n// Each Hit object has a reference to its Yallist.Node.  This\n// never changes.\n//\n// cache is a Map (or PseudoMap) that matches the keys to\n// the Yallist.Node object.\nclass LRUCache {\n  constructor (options) {\n    if (typeof options === 'number')\n      options = { max: options }\n\n    if (!options)\n      options = {}\n\n    if (options.max && (typeof options.max !== 'number' || options.max < 0))\n      throw new TypeError('max must be a non-negative number')\n    // Kind of weird to have a default max of Infinity, but oh well.\n    const max = this[MAX] = options.max || Infinity\n\n    const lc = options.length || naiveLength\n    this[LENGTH_CALCULATOR] = (typeof lc !== 'function') ? naiveLength : lc\n    this[ALLOW_STALE] = options.stale || false\n    if (options.maxAge && typeof options.maxAge !== 'number')\n      throw new TypeError('maxAge must be a number')\n    this[MAX_AGE] = options.maxAge || 0\n    this[DISPOSE] = options.dispose\n    this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false\n    this[UPDATE_AGE_ON_GET] = options.updateAgeOnGet || false\n    this.reset()\n  }\n\n  // resize the cache when the max changes.\n  set max (mL) {\n    if (typeof mL !== 'number' || mL < 0)\n      throw new TypeError('max must be a non-negative number')\n\n    this[MAX] = mL || Infinity\n    trim(this)\n  }\n  get max () {\n    return this[MAX]\n  }\n\n  set allowStale (allowStale) {\n    this[ALLOW_STALE] = !!allowStale\n  }\n  get allowStale () {\n    return this[ALLOW_STALE]\n  }\n\n  set maxAge (mA) {\n    if (typeof mA !== 'number')\n      throw new TypeError('maxAge must be a non-negative number')\n\n    this[MAX_AGE] = mA\n    trim(this)\n  }\n  get maxAge () {\n    return this[MAX_AGE]\n  }\n\n  // resize the cache when the lengthCalculator changes.\n  set lengthCalculator (lC) {\n    if (typeof lC !== 'function')\n      lC = naiveLength\n\n    if (lC !== this[LENGTH_CALCULATOR]) {\n      this[LENGTH_CALCULATOR] = lC\n      this[LENGTH] = 0\n      this[LRU_LIST].forEach(hit => {\n        hit.length = this[LENGTH_CALCULATOR](hit.value, hit.key)\n        this[LENGTH] += hit.length\n      })\n    }\n    trim(this)\n  }\n  get lengthCalculator () { return this[LENGTH_CALCULATOR] }\n\n  get length () { return this[LENGTH] }\n  get itemCount () { return this[LRU_LIST].length }\n\n  rforEach (fn, thisp) {\n    thisp = thisp || this\n    for (let walker = this[LRU_LIST].tail; walker !== null;) {\n      const prev = walker.prev\n      forEachStep(this, fn, walker, thisp)\n      walker = prev\n    }\n  }\n\n  forEach (fn, thisp) {\n    thisp = thisp || this\n    for (let walker = this[LRU_LIST].head; walker !== null;) {\n      const next = walker.next\n      forEachStep(this, fn, walker, thisp)\n      walker = next\n    }\n  }\n\n  keys () {\n    return this[LRU_LIST].toArray().map(k => k.key)\n  }\n\n  values () {\n    return this[LRU_LIST].toArray().map(k => k.value)\n  }\n\n  reset () {\n    if (this[DISPOSE] &&\n        this[LRU_LIST] &&\n        this[LRU_LIST].length) {\n      this[LRU_LIST].forEach(hit => this[DISPOSE](hit.key, hit.value))\n    }\n\n    this[CACHE] = new Map() // hash of items by key\n    this[LRU_LIST] = new Yallist() // list of items in order of use recency\n    this[LENGTH] = 0 // length of items in the list\n  }\n\n  dump () {\n    return this[LRU_LIST].map(hit =>\n      isStale(this, hit) ? false : {\n        k: hit.key,\n        v: hit.value,\n        e: hit.now + (hit.maxAge || 0)\n      }).toArray().filter(h => h)\n  }\n\n  dumpLru () {\n    return this[LRU_LIST]\n  }\n\n  set (key, value, maxAge) {\n    maxAge = maxAge || this[MAX_AGE]\n\n    if (maxAge && typeof maxAge !== 'number')\n      throw new TypeError('maxAge must be a number')\n\n    const now = maxAge ? Date.now() : 0\n    const len = this[LENGTH_CALCULATOR](value, key)\n\n    if (this[CACHE].has(key)) {\n      if (len > this[MAX]) {\n        del(this, this[CACHE].get(key))\n        return false\n      }\n\n      const node = this[CACHE].get(key)\n      const item = node.value\n\n      // dispose of the old one before overwriting\n      // split out into 2 ifs for better coverage tracking\n      if (this[DISPOSE]) {\n        if (!this[NO_DISPOSE_ON_SET])\n          this[DISPOSE](key, item.value)\n      }\n\n      item.now = now\n      item.maxAge = maxAge\n      item.value = value\n      this[LENGTH] += len - item.length\n      item.length = len\n      this.get(key)\n      trim(this)\n      return true\n    }\n\n    const hit = new Entry(key, value, len, now, maxAge)\n\n    // oversized objects fall out of cache automatically.\n    if (hit.length > this[MAX]) {\n      if (this[DISPOSE])\n        this[DISPOSE](key, value)\n\n      return false\n    }\n\n    this[LENGTH] += hit.length\n    this[LRU_LIST].unshift(hit)\n    this[CACHE].set(key, this[LRU_LIST].head)\n    trim(this)\n    return true\n  }\n\n  has (key) {\n    if (!this[CACHE].has(key)) return false\n    const hit = this[CACHE].get(key).value\n    return !isStale(this, hit)\n  }\n\n  get (key) {\n    return get(this, key, true)\n  }\n\n  peek (key) {\n    return get(this, key, false)\n  }\n\n  pop () {\n    const node = this[LRU_LIST].tail\n    if (!node)\n      return null\n\n    del(this, node)\n    return node.value\n  }\n\n  del (key) {\n    del(this, this[CACHE].get(key))\n  }\n\n  load (arr) {\n    // reset the cache\n    this.reset()\n\n    const now = Date.now()\n    // A previous serialized cache has the most recent items first\n    for (let l = arr.length - 1; l >= 0; l--) {\n      const hit = arr[l]\n      const expiresAt = hit.e || 0\n      if (expiresAt === 0)\n        // the item was created without expiration in a non aged cache\n        this.set(hit.k, hit.v)\n      else {\n        const maxAge = expiresAt - now\n        // dont add already expired items\n        if (maxAge > 0) {\n          this.set(hit.k, hit.v, maxAge)\n        }\n      }\n    }\n  }\n\n  prune () {\n    this[CACHE].forEach((value, key) => get(this, key, false))\n  }\n}\n\nconst get = (self, key, doUse) => {\n  const node = self[CACHE].get(key)\n  if (node) {\n    const hit = node.value\n    if (isStale(self, hit)) {\n      del(self, node)\n      if (!self[ALLOW_STALE])\n        return undefined\n    } else {\n      if (doUse) {\n        if (self[UPDATE_AGE_ON_GET])\n          node.value.now = Date.now()\n        self[LRU_LIST].unshiftNode(node)\n      }\n    }\n    return hit.value\n  }\n}\n\nconst isStale = (self, hit) => {\n  if (!hit || (!hit.maxAge && !self[MAX_AGE]))\n    return false\n\n  const diff = Date.now() - hit.now\n  return hit.maxAge ? diff > hit.maxAge\n    : self[MAX_AGE] && (diff > self[MAX_AGE])\n}\n\nconst trim = self => {\n  if (self[LENGTH] > self[MAX]) {\n    for (let walker = self[LRU_LIST].tail;\n      self[LENGTH] > self[MAX] && walker !== null;) {\n      // We know that we're about to delete this one, and also\n      // what the next least recently used key will be, so just\n      // go ahead and set it now.\n      const prev = walker.prev\n      del(self, walker)\n      walker = prev\n    }\n  }\n}\n\nconst del = (self, node) => {\n  if (node) {\n    const hit = node.value\n    if (self[DISPOSE])\n      self[DISPOSE](hit.key, hit.value)\n\n    self[LENGTH] -= hit.length\n    self[CACHE].delete(hit.key)\n    self[LRU_LIST].removeNode(node)\n  }\n}\n\nclass Entry {\n  constructor (key, value, length, now, maxAge) {\n    this.key = key\n    this.value = value\n    this.length = length\n    this.now = now\n    this.maxAge = maxAge || 0\n  }\n}\n\nconst forEachStep = (self, fn, node, thisp) => {\n  let hit = node.value\n  if (isStale(self, hit)) {\n    del(self, node)\n    if (!self[ALLOW_STALE])\n      hit = undefined\n  }\n  if (hit)\n    fn.call(thisp, hit.value, hit.key, self)\n}\n\nmodule.exports = LRUCache\n","// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n","// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n","const debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","const { MAX_SAFE_COMPONENT_LENGTH } = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst src = exports.src = []\nconst t = exports.t = {}\nlet R = 0\n\nconst createToken = (name, value, isGlobal) => {\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '[0-9]+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*')\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', '[0-9A-Za-z-]+')\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCE', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n","const numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n","const debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n          version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre':\n        if (this.prerelease.length === 0) {\n          this.prerelease = [0]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            this.prerelease.push(0)\n          }\n        }\n        if (identifier) {\n          const base = Number(identifierBase) ? 1 : 0\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = [identifier, base]\n            }\n          } else {\n            this.prerelease = [identifier, base]\n          }\n        }\n        break\n\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.format()\n    this.raw = this.version\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","const SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n","const compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n","const compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n","const compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n","const compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n","const compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n","const compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n","const eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n","const ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    options = parseOptions(options)\n\n    // Special cases where nothing can possibly be lower\n    if (options.includePrerelease &&\n      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n      return false\n    }\n    if (!options.includePrerelease &&\n      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n      return false\n    }\n\n    // Same direction increasing (> or >=)\n    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n      return true\n    }\n    // Same direction decreasing (< or <=)\n    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // same SemVer and both sides are inclusive (<= or >=)\n    if (\n      (this.semver.version === comp.semver.version) &&\n      this.operator.includes('=') && comp.operator.includes('=')) {\n      return true\n    }\n    // opposite directions less than\n    if (cmp(this.semver, '<', comp.semver, options) &&\n      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // opposite directions greater than\n    if (cmp(this.semver, '>', comp.semver, options) &&\n      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n","// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.format()\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First, split based on boolean or ||\n    this.raw = range\n    this.set = range\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${range}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.format()\n  }\n\n  format () {\n    this.range = this.set\n      .map((comps) => {\n        return comps.join(' ').trim()\n      })\n      .join('||')\n      .trim()\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    range = range.trim()\n\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts =\n      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n      (this.options.loose && FLAG_LOOSE)\n    const memoKey = memoOpts + ':' + range\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n\n    // normalize spaces\n    range = range.split(/\\s+/).join(' ')\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nmodule.exports = Range\n\nconst LRU = require('lru-cache')\nconst cache = new LRU({ max: 1000 })\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\nconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require('../internal/constants')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) =>\n  comp.trim().split(/\\s+/).map((c) => {\n    return replaceTilde(c, options)\n  }).join(' ')\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) =>\n  comp.trim().split(/\\s+/).map((c) => {\n    return replaceCaret(c, options)\n  }).join(' ')\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map((c) => {\n    return replaceXRange(c, options)\n  }).join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp.trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return (`${from} ${to}`).trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n","const Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n","import {MessageData} from './types';\n\n/**\n * Open editor url in a new window, and pass a message.\n */\nexport default function (window: Window, url: string, data: MessageData) {\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const editor = window.open(url)!;\n  const wait = 10_000;\n  const step = 250;\n  const {origin} = new URL(url);\n  // eslint-disable-next-line no-bitwise\n  let count = ~~(wait / step);\n\n  function listen(evt: MessageEvent) {\n    if (evt.source === editor) {\n      count = 0;\n      window.removeEventListener('message', listen, false);\n    }\n  }\n  window.addEventListener('message', listen, false);\n\n  // send message\n  // periodically resend until ack received or timeout\n  function send() {\n    if (count <= 0) {\n      return;\n    }\n    editor.postMessage(data, origin);\n    setTimeout(send, step);\n    count -= 1;\n  }\n  setTimeout(send, step);\n}\n","// generated with build-style.sh\nexport default `.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: \"\";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n`;\n","import {writeConfig} from 'vega';\n\nexport function isURL(s: string): boolean {\n  return s.startsWith('http://') || s.startsWith('https://') || s.startsWith('//');\n}\n\nexport type DeepPartial<T> = {[P in keyof T]?: P extends unknown ? unknown : DeepPartial<T[P]>};\n\nexport function mergeDeep<T>(dest: T, ...src: readonly DeepPartial<T>[]): T {\n  for (const s of src) {\n    deepMerge_(dest, s);\n  }\n  return dest;\n}\n\nfunction deepMerge_(dest: any, src: any) {\n  for (const property of Object.keys(src)) {\n    writeConfig(dest, property, src[property], true);\n  }\n}\n","import {applyPatch, Operation} from 'fast-json-patch';\nimport stringify from 'json-stringify-pretty-compact';\n// need this import because of https://github.com/npm/node-semver/issues/381\nimport satisfies from 'semver/functions/satisfies';\nimport * as vegaImport from 'vega';\nimport {\n  AutoSize,\n  Config as VgConfig,\n  EncodeEntryName,\n  isBoolean,\n  isObject,\n  isString,\n  Loader,\n  LoaderOptions,\n  mergeConfig,\n  Renderers,\n  Spec as VgSpec,\n  TooltipHandler,\n  View,\n} from 'vega';\nimport {expressionInterpreter} from 'vega-interpreter';\nimport * as vegaLiteImport from 'vega-lite';\nimport {Config as VlConfig, TopLevelSpec as VlSpec} from 'vega-lite';\nimport schemaParser from 'vega-schema-url-parser';\nimport * as themes from 'vega-themes';\nimport {Handler, Options as TooltipOptions} from 'vega-tooltip';\nimport post from './post';\nimport embedStyle from './style';\nimport {Config, ExpressionFunction, Mode} from './types';\nimport {mergeDeep} from './util';\nimport pkg from '../package.json';\n\nexport const version = pkg.version;\n\nexport * from './types';\n\nexport const vega = vegaImport;\nexport let vegaLite = vegaLiteImport;\n\n// For backwards compatibility with Vega-Lite before v4.\nconst w = (typeof window !== 'undefined' ? window : undefined) as any;\nif (vegaLite === undefined && w?.vl?.compile) {\n  vegaLite = w.vl;\n}\n\nexport interface Actions {\n  export?: boolean | {svg?: boolean; png?: boolean};\n  source?: boolean;\n  compiled?: boolean;\n  editor?: boolean;\n}\n\nexport const DEFAULT_ACTIONS = {export: {svg: true, png: true}, source: true, compiled: true, editor: true};\n\nexport interface Hover {\n  hoverSet?: EncodeEntryName;\n  updateSet?: EncodeEntryName;\n}\n\nexport type PatchFunc = (spec: VgSpec) => VgSpec;\n\nconst I18N = {\n  CLICK_TO_VIEW_ACTIONS: 'Click to view actions',\n  COMPILED_ACTION: 'View Compiled Vega',\n  EDITOR_ACTION: 'Open in Vega Editor',\n  PNG_ACTION: 'Save as PNG',\n  SOURCE_ACTION: 'View Source',\n  SVG_ACTION: 'Save as SVG',\n};\n\nexport interface EmbedOptions<S = string, R = Renderers> {\n  bind?: HTMLElement | string;\n  actions?: boolean | Actions;\n  mode?: Mode;\n  theme?: 'excel' | 'ggplot2' | 'quartz' | 'vox' | 'dark';\n  defaultStyle?: boolean | string;\n  logLevel?: number;\n  loader?: Loader | LoaderOptions;\n  renderer?: R;\n  tooltip?: TooltipHandler | TooltipOptions | boolean;\n  patch?: S | PatchFunc | Operation[];\n  width?: number;\n  height?: number;\n  padding?: number | {left?: number; right?: number; top?: number; bottom?: number};\n  scaleFactor?: number | {svg?: number; png?: number};\n  config?: S | Config;\n  sourceHeader?: string;\n  sourceFooter?: string;\n  editorUrl?: string;\n  hover?: boolean | Hover;\n  i18n?: Partial<typeof I18N>;\n  downloadFileName?: string;\n  formatLocale?: Record<string, unknown>;\n  timeFormatLocale?: Record<string, unknown>;\n  expressionFunctions?: ExpressionFunction;\n  ast?: boolean;\n  expr?: typeof expressionInterpreter;\n  viewClass?: typeof View;\n}\n\nconst NAMES: {[key in Mode]: string} = {\n  vega: 'Vega',\n  'vega-lite': 'Vega-Lite',\n};\n\nconst VERSION = {\n  vega: vega.version,\n  'vega-lite': vegaLite ? vegaLite.version : 'not available',\n};\n\nconst PREPROCESSOR: {[mode in Mode]: (spec: any, config?: Config) => VgSpec} = {\n  vega: (vgSpec: VgSpec) => vgSpec,\n  'vega-lite': (vlSpec, config) => vegaLite.compile(vlSpec as VlSpec, {config: config as VlConfig}).spec,\n};\n\nconst SVG_CIRCLES = `\n<svg viewBox=\"0 0 16 16\" fill=\"currentColor\" stroke=\"none\" stroke-width=\"1\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n  <circle r=\"2\" cy=\"8\" cx=\"2\"></circle>\n  <circle r=\"2\" cy=\"8\" cx=\"8\"></circle>\n  <circle r=\"2\" cy=\"8\" cx=\"14\"></circle>\n</svg>`;\n\nconst CHART_WRAPPER_CLASS = 'chart-wrapper';\n\nexport type VisualizationSpec = VlSpec | VgSpec;\n\nexport interface Result {\n  /** The Vega view. */\n  view: View;\n\n  /** The input specification. */\n  spec: VisualizationSpec;\n\n  /** The compiled and patched Vega specification. */\n  vgSpec: VgSpec;\n\n  /** The Vega-Embed options. */\n  embedOptions: EmbedOptions;\n\n  /** Removes references to unwanted behaviors and memory leaks. Calls Vega's `view.finalize`.  */\n  finalize: () => void;\n}\n\nfunction isTooltipHandler(h?: boolean | TooltipOptions | TooltipHandler): h is TooltipHandler {\n  return typeof h === 'function';\n}\n\nfunction viewSource(source: string, sourceHeader: string, sourceFooter: string, mode: Mode) {\n  const header = `<html><head>${sourceHeader}</head><body><pre><code class=\"json\">`;\n  const footer = `</code></pre>${sourceFooter}</body></html>`;\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const win = window.open('')!;\n  win.document.write(header + source + footer);\n  win.document.title = `${NAMES[mode]} JSON Source`;\n}\n\n/**\n * Try to guess the type of spec.\n *\n * @param spec Vega or Vega-Lite spec.\n */\nexport function guessMode(spec: VisualizationSpec, providedMode?: Mode): Mode {\n  // Decide mode\n  if (spec.$schema) {\n    const parsed = schemaParser(spec.$schema);\n    if (providedMode && providedMode !== parsed.library) {\n      console.warn(\n        `The given visualization spec is written in ${NAMES[parsed.library]}, but mode argument sets ${\n          NAMES[providedMode] ?? providedMode\n        }.`\n      );\n    }\n\n    const mode = parsed.library as Mode;\n\n    if (!satisfies(VERSION[mode], `^${parsed.version.slice(1)}`)) {\n      console.warn(\n        `The input spec uses ${NAMES[mode]} ${parsed.version}, but the current version of ${NAMES[mode]} is v${VERSION[mode]}.`\n      );\n    }\n\n    return mode;\n  }\n\n  // try to guess from the provided spec\n  if (\n    'mark' in spec ||\n    'encoding' in spec ||\n    'layer' in spec ||\n    'hconcat' in spec ||\n    'vconcat' in spec ||\n    'facet' in spec ||\n    'repeat' in spec\n  ) {\n    return 'vega-lite';\n  }\n\n  if ('marks' in spec || 'signals' in spec || 'scales' in spec || 'axes' in spec) {\n    return 'vega';\n  }\n\n  return providedMode ?? 'vega';\n}\n\nfunction isLoader(o?: LoaderOptions | Loader): o is Loader {\n  return !!(o && 'load' in o);\n}\n\nfunction createLoader(opts?: Loader | LoaderOptions) {\n  return isLoader(opts) ? opts : vega.loader(opts);\n}\n\nfunction embedOptionsFromUsermeta(parsedSpec: VisualizationSpec) {\n  const opts = (parsedSpec.usermeta as any)?.embedOptions ?? {};\n  if (isString(opts.defaultStyle)) {\n    // we don't allow styles set via usermeta since it would allow injection of logic (we set the style via innerHTML)\n    opts.defaultStyle = false;\n  }\n  return opts;\n}\n\n/**\n * Embed a Vega visualization component in a web page. This function returns a promise.\n *\n * @param el        DOM element in which to place component (DOM node or CSS selector).\n * @param spec      String : A URL string from which to load the Vega specification.\n *                  Object : The Vega/Vega-Lite specification as a parsed JSON object.\n * @param opts       A JavaScript object containing options for embedding.\n */\nexport default async function embed(\n  el: HTMLElement | string,\n  spec: VisualizationSpec | string,\n  opts: EmbedOptions = {}\n): Promise<Result> {\n  let parsedSpec: VisualizationSpec;\n  let loader: Loader | undefined;\n\n  if (isString(spec)) {\n    loader = createLoader(opts.loader);\n    parsedSpec = JSON.parse(await loader.load(spec));\n  } else {\n    parsedSpec = spec;\n  }\n\n  const loadedEmbedOptions = embedOptionsFromUsermeta(parsedSpec);\n  const usermetaLoader = loadedEmbedOptions.loader;\n\n  // either create the loader for the first time or create a new loader if the spec has new loader options\n  if (!loader || usermetaLoader) {\n    loader = createLoader(opts.loader ?? usermetaLoader);\n  }\n\n  const usermetaOpts = await loadOpts(loadedEmbedOptions, loader);\n  const parsedOpts = await loadOpts(opts, loader);\n\n  const mergedOpts = {\n    ...mergeDeep(parsedOpts, usermetaOpts),\n    config: mergeConfig(parsedOpts.config ?? {}, usermetaOpts.config ?? {}),\n  };\n\n  return await _embed(el, parsedSpec, mergedOpts, loader);\n}\n\nasync function loadOpts(opt: EmbedOptions, loader: Loader): Promise<EmbedOptions<never>> {\n  const config: Config = isString(opt.config) ? JSON.parse(await loader.load(opt.config)) : opt.config ?? {};\n  const patch: PatchFunc | Operation[] = isString(opt.patch) ? JSON.parse(await loader.load(opt.patch)) : opt.patch;\n  return {\n    ...(opt as any),\n    ...(patch ? {patch} : {}),\n    ...(config ? {config} : {}),\n  };\n}\n\nfunction getRoot(el: Element) {\n  const possibleRoot = el.getRootNode ? el.getRootNode() : document;\n  return possibleRoot instanceof ShadowRoot\n    ? {root: possibleRoot, rootContainer: possibleRoot}\n    : {root: document, rootContainer: document.head ?? document.body};\n}\n\nasync function _embed(\n  el: HTMLElement | string,\n  spec: VisualizationSpec,\n  opts: EmbedOptions<never> = {},\n  loader: Loader\n): Promise<Result> {\n  const config = opts.theme ? mergeConfig(themes[opts.theme], opts.config ?? {}) : opts.config;\n\n  const actions = isBoolean(opts.actions) ? opts.actions : mergeDeep<Actions>({}, DEFAULT_ACTIONS, opts.actions ?? {});\n  const i18n = {...I18N, ...opts.i18n};\n\n  const renderer = opts.renderer ?? 'canvas';\n  const logLevel = opts.logLevel ?? vega.Warn;\n  const downloadFileName = opts.downloadFileName ?? 'visualization';\n\n  const element = typeof el === 'string' ? document.querySelector(el) : el;\n  if (!element) {\n    throw new Error(`${el} does not exist`);\n  }\n\n  if (opts.defaultStyle !== false) {\n    const ID = 'vega-embed-style';\n    const {root, rootContainer} = getRoot(element);\n    if (!root.getElementById(ID)) {\n      const style = document.createElement('style');\n      style.id = ID;\n      style.innerHTML =\n        opts.defaultStyle === undefined || opts.defaultStyle === true\n          ? (embedStyle ?? '').toString()\n          : opts.defaultStyle;\n      rootContainer.appendChild(style);\n    }\n  }\n\n  const mode = guessMode(spec, opts.mode);\n\n  let vgSpec: VgSpec = PREPROCESSOR[mode](spec, config);\n\n  if (mode === 'vega-lite') {\n    if (vgSpec.$schema) {\n      const parsed = schemaParser(vgSpec.$schema);\n\n      if (!satisfies(VERSION.vega, `^${parsed.version.slice(1)}`)) {\n        console.warn(`The compiled spec uses Vega ${parsed.version}, but current version is v${VERSION.vega}.`);\n      }\n    }\n  }\n\n  element.classList.add('vega-embed');\n  if (actions) {\n    element.classList.add('has-actions');\n  }\n  element.innerHTML = ''; // clear container\n\n  let container = element;\n  if (actions) {\n    const chartWrapper = document.createElement('div');\n    chartWrapper.classList.add(CHART_WRAPPER_CLASS);\n    element.appendChild(chartWrapper);\n    container = chartWrapper;\n  }\n\n  const patch = opts.patch;\n  if (patch) {\n    vgSpec = patch instanceof Function ? patch(vgSpec) : applyPatch(vgSpec, patch, true, false).newDocument;\n  }\n\n  // Set locale. Note that this is a global setting.\n  if (opts.formatLocale) {\n    vega.formatLocale(opts.formatLocale);\n  }\n\n  if (opts.timeFormatLocale) {\n    vega.timeFormatLocale(opts.timeFormatLocale);\n  }\n\n  // Set custom expression functions\n  if (opts.expressionFunctions) {\n    for (const name in opts.expressionFunctions) {\n      const expressionFunction = opts.expressionFunctions[name];\n      if ('fn' in expressionFunction) {\n        vega.expressionFunction(name, expressionFunction.fn, expressionFunction['visitor']);\n      } else if (expressionFunction instanceof Function) {\n        vega.expressionFunction(name, expressionFunction);\n      }\n    }\n  }\n\n  const {ast} = opts;\n\n  // Do not apply the config to Vega when we have already applied it to Vega-Lite.\n  // This call may throw an Error if parsing fails.\n  const runtime = vega.parse(vgSpec, mode === 'vega-lite' ? {} : (config as VgConfig), {ast});\n\n  const view = new (opts.viewClass || vega.View)(runtime, {\n    loader,\n    logLevel,\n    renderer,\n    ...(ast ? {expr: (vega as any).expressionInterpreter ?? opts.expr ?? expressionInterpreter} : {}),\n  });\n\n  view.addSignalListener('autosize', (_, autosize: Exclude<AutoSize, string>) => {\n    const {type} = autosize;\n    if (type == 'fit-x') {\n      container.classList.add('fit-x');\n      container.classList.remove('fit-y');\n    } else if (type == 'fit-y') {\n      container.classList.remove('fit-x');\n      container.classList.add('fit-y');\n    } else if (type == 'fit') {\n      container.classList.add('fit-x', 'fit-y');\n    } else {\n      container.classList.remove('fit-x', 'fit-y');\n    }\n  });\n\n  if (opts.tooltip !== false) {\n    const handler = isTooltipHandler(opts.tooltip)\n      ? opts.tooltip\n      : // user provided boolean true or tooltip options\n        new Handler(opts.tooltip === true ? {} : opts.tooltip).call;\n\n    view.tooltip(handler);\n  }\n\n  let {hover} = opts;\n\n  if (hover === undefined) {\n    hover = mode === 'vega';\n  }\n\n  if (hover) {\n    const {hoverSet, updateSet} = (typeof hover === 'boolean' ? {} : hover) as Hover;\n\n    view.hover(hoverSet, updateSet);\n  }\n\n  if (opts) {\n    if (opts.width != null) {\n      view.width(opts.width);\n    }\n    if (opts.height != null) {\n      view.height(opts.height);\n    }\n    if (opts.padding != null) {\n      view.padding(opts.padding);\n    }\n  }\n\n  await view.initialize(container, opts.bind).runAsync();\n\n  let documentClickHandler: ((this: Document, ev: MouseEvent) => void) | undefined;\n\n  if (actions !== false) {\n    let wrapper = element;\n\n    if (opts.defaultStyle !== false) {\n      const details = document.createElement('details');\n      details.title = i18n.CLICK_TO_VIEW_ACTIONS;\n      element.append(details);\n\n      wrapper = details;\n      const summary = document.createElement('summary');\n      summary.innerHTML = SVG_CIRCLES;\n\n      details.append(summary);\n\n      documentClickHandler = (ev: MouseEvent) => {\n        if (!details.contains(ev.target as any)) {\n          details.removeAttribute('open');\n        }\n      };\n      document.addEventListener('click', documentClickHandler);\n    }\n\n    const ctrl = document.createElement('div');\n    wrapper.append(ctrl);\n    ctrl.classList.add('vega-actions');\n\n    // add 'Export' action\n    if (actions === true || actions.export !== false) {\n      for (const ext of ['svg', 'png'] as const) {\n        if (actions === true || actions.export === true || (actions.export as {svg?: boolean; png?: boolean})[ext]) {\n          const i18nExportAction = (i18n as {[key: string]: string})[`${ext.toUpperCase()}_ACTION`];\n          const exportLink = document.createElement('a');\n          const scaleFactor = isObject(opts.scaleFactor) ? opts.scaleFactor[ext] : opts.scaleFactor;\n\n          exportLink.text = i18nExportAction;\n          exportLink.href = '#';\n          exportLink.target = '_blank';\n          exportLink.download = `${downloadFileName}.${ext}`;\n          // add link on mousedown so that it's correct when the click happens\n          exportLink.addEventListener('mousedown', async function (this, e) {\n            e.preventDefault();\n            const url = await view.toImageURL(ext, scaleFactor);\n            this.href = url;\n          });\n\n          ctrl.append(exportLink);\n        }\n      }\n    }\n\n    // add 'View Source' action\n    if (actions === true || actions.source !== false) {\n      const viewSourceLink = document.createElement('a');\n\n      viewSourceLink.text = i18n.SOURCE_ACTION;\n      viewSourceLink.href = '#';\n      viewSourceLink.addEventListener('click', function (this, e) {\n        viewSource(stringify(spec), opts.sourceHeader ?? '', opts.sourceFooter ?? '', mode);\n        e.preventDefault();\n      });\n\n      ctrl.append(viewSourceLink);\n    }\n\n    // add 'View Compiled' action\n    if (mode === 'vega-lite' && (actions === true || actions.compiled !== false)) {\n      const compileLink = document.createElement('a');\n\n      compileLink.text = i18n.COMPILED_ACTION;\n      compileLink.href = '#';\n      compileLink.addEventListener('click', function (this, e) {\n        viewSource(stringify(vgSpec), opts.sourceHeader ?? '', opts.sourceFooter ?? '', 'vega');\n        e.preventDefault();\n      });\n\n      ctrl.append(compileLink);\n    }\n\n    // add 'Open in Vega Editor' action\n    if (actions === true || actions.editor !== false) {\n      const editorUrl = opts.editorUrl ?? 'https://vega.github.io/editor/';\n      const editorLink = document.createElement('a');\n\n      editorLink.text = i18n.EDITOR_ACTION;\n      editorLink.href = '#';\n      editorLink.addEventListener('click', function (this, e) {\n        post(window, editorUrl, {\n          config: config as Config,\n          mode,\n          renderer,\n          spec: stringify(spec),\n        });\n        e.preventDefault();\n      });\n\n      ctrl.append(editorLink);\n    }\n  }\n\n  function finalize() {\n    if (documentClickHandler) {\n      document.removeEventListener('click', documentClickHandler);\n    }\n    view.finalize();\n  }\n\n  return {view, spec, vgSpec, finalize, embedOptions: opts};\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}