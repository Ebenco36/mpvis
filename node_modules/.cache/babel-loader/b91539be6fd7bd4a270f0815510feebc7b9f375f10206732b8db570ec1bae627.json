{"ast":null,"code":"import { getVgPositionChannel } from '../../../channel';\nimport * as log from '../../../log';\nimport { isSignalRef } from '../../../vega.schema';\nimport { getMarkPropOrConfig } from '../../common';\nconst ALIGNED_X_CHANNEL = {\n  left: 'x',\n  center: 'xc',\n  right: 'x2'\n};\nconst BASELINED_Y_CHANNEL = {\n  top: 'y',\n  middle: 'yc',\n  bottom: 'y2'\n};\nexport function vgAlignedPositionChannel(channel, markDef, config, defaultAlign = 'middle') {\n  if (channel === 'radius' || channel === 'theta') {\n    return getVgPositionChannel(channel);\n  }\n  const alignChannel = channel === 'x' ? 'align' : 'baseline';\n  const align = getMarkPropOrConfig(alignChannel, markDef, config);\n  let alignExcludingSignal;\n  if (isSignalRef(align)) {\n    log.warn(log.message.rangeMarkAlignmentCannotBeExpression(alignChannel));\n    alignExcludingSignal = undefined;\n  } else {\n    alignExcludingSignal = align;\n  }\n  if (channel === 'x') {\n    return ALIGNED_X_CHANNEL[alignExcludingSignal || (defaultAlign === 'top' ? 'left' : 'center')];\n  } else {\n    return BASELINED_Y_CHANNEL[alignExcludingSignal || defaultAlign];\n  }\n}","map":{"version":3,"names":["getVgPositionChannel","log","isSignalRef","getMarkPropOrConfig","ALIGNED_X_CHANNEL","left","center","right","BASELINED_Y_CHANNEL","top","middle","bottom","vgAlignedPositionChannel","channel","markDef","config","defaultAlign","alignChannel","align","alignExcludingSignal","warn","message","rangeMarkAlignmentCannotBeExpression","undefined"],"sources":["../../../../../src/compile/mark/encode/position-align.ts"],"sourcesContent":[null],"mappings":"AACA,SAAQA,oBAAoB,QAAO,kBAAkB;AAErD,OAAO,KAAKC,GAAG,MAAM,cAAc;AAEnC,SAAQC,WAAW,QAAwB,sBAAsB;AACjE,SAAQC,mBAAmB,QAAO,cAAc;AAEhD,MAAMC,iBAAiB,GAAmC;EACxDC,IAAI,EAAE,GAAG;EACTC,MAAM,EAAE,IAAI;EACZC,KAAK,EAAE;CACR;AAED,MAAMC,mBAAmB,GAAG;EAC1BC,GAAG,EAAE,GAAG;EACRC,MAAM,EAAE,IAAI;EACZC,MAAM,EAAE;CACT;AAED,OAAM,SAAUC,wBAAwBA,CACtCC,OAAuC,EACvCC,OAAiC,EACjCC,MAAyB,EACzBC,YAAA,GAAiC,QAAQ;EAEzC,IAAIH,OAAO,KAAK,QAAQ,IAAIA,OAAO,KAAK,OAAO,EAAE;IAC/C,OAAOb,oBAAoB,CAACa,OAAO,CAAC;;EAEtC,MAAMI,YAAY,GAAGJ,OAAO,KAAK,GAAG,GAAG,OAAO,GAAG,UAAU;EAC3D,MAAMK,KAAK,GAAGf,mBAAmB,CAACc,YAAY,EAAEH,OAAO,EAAEC,MAAM,CAAC;EAEhE,IAAII,oBAA0C;EAE9C,IAAIjB,WAAW,CAACgB,KAAK,CAAC,EAAE;IACtBjB,GAAG,CAACmB,IAAI,CAACnB,GAAG,CAACoB,OAAO,CAACC,oCAAoC,CAACL,YAAY,CAAC,CAAC;IACxEE,oBAAoB,GAAGI,SAAS;GACjC,MAAM;IACLJ,oBAAoB,GAAGD,KAAK;;EAG9B,IAAIL,OAAO,KAAK,GAAG,EAAE;IACnB,OAAOT,iBAAiB,CAACe,oBAAoB,KAAKH,YAAY,KAAK,KAAK,GAAG,MAAM,GAAG,QAAQ,CAAC,CAAC;GAC/F,MAAM;IACL,OAAOR,mBAAmB,CAACW,oBAAoB,IAAIH,YAAY,CAAC;;AAEpE"},"metadata":{},"sourceType":"module","externalDependencies":[]}