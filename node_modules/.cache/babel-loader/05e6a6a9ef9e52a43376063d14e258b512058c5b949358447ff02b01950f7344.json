{"ast":null,"code":"import { writeConfig } from 'vega';\nimport { isObject, mergeConfig } from 'vega-util';\nimport { AXIS_CONFIGS, isConditionalAxisValue } from './axis';\nimport { signalOrValueRefWithCondition, signalRefOrValue } from './compile/common';\nimport { getAllCompositeMarks } from './compositemark';\nimport { replaceExprRef } from './expr';\nimport { VL_ONLY_LEGEND_CONFIG } from './guide';\nimport { HEADER_CONFIGS } from './header';\nimport { defaultLegendConfig } from './legend';\nimport * as mark from './mark';\nimport { MARK_CONFIGS, PRIMITIVE_MARKS, VL_ONLY_MARK_CONFIG_PROPERTIES, VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX } from './mark';\nimport { assembleParameterSignals } from './parameter';\nimport { defaultScaleConfig } from './scale';\nimport { defaultConfig as defaultSelectionConfig } from './selection';\nimport { DEFAULT_SPACING, isStep } from './spec/base';\nimport { extractTitleConfig } from './title';\nimport { duplicate, getFirstDefined, isEmpty, keys, omit } from './util';\nexport function getViewConfigContinuousSize(viewConfig, channel) {\n  return viewConfig[channel] ?? viewConfig[channel === 'width' ? 'continuousWidth' : 'continuousHeight']; // get width/height for backwards compatibility\n}\n\nexport function getViewConfigDiscreteStep(viewConfig, channel) {\n  const size = getViewConfigDiscreteSize(viewConfig, channel);\n  return isStep(size) ? size.step : DEFAULT_STEP;\n}\nexport function getViewConfigDiscreteSize(viewConfig, channel) {\n  const size = viewConfig[channel] ?? viewConfig[channel === 'width' ? 'discreteWidth' : 'discreteHeight']; // get width/height for backwards compatibility\n  return getFirstDefined(size, {\n    step: viewConfig.step\n  });\n}\nexport const DEFAULT_STEP = 20;\nexport const defaultViewConfig = {\n  continuousWidth: 200,\n  continuousHeight: 200,\n  step: DEFAULT_STEP\n};\nexport function isVgScheme(rangeScheme) {\n  return rangeScheme && !!rangeScheme['scheme'];\n}\nexport const defaultConfig = {\n  background: 'white',\n  padding: 5,\n  timeFormat: '%b %d, %Y',\n  countTitle: 'Count of Records',\n  view: defaultViewConfig,\n  mark: mark.defaultMarkConfig,\n  arc: {},\n  area: {},\n  bar: mark.defaultBarConfig,\n  circle: {},\n  geoshape: {},\n  image: {},\n  line: {},\n  point: {},\n  rect: mark.defaultRectConfig,\n  rule: {\n    color: 'black'\n  },\n  square: {},\n  text: {\n    color: 'black'\n  },\n  tick: mark.defaultTickConfig,\n  trail: {},\n  boxplot: {\n    size: 14,\n    extent: 1.5,\n    box: {},\n    median: {\n      color: 'white'\n    },\n    outliers: {},\n    rule: {},\n    ticks: null\n  },\n  errorbar: {\n    center: 'mean',\n    rule: true,\n    ticks: false\n  },\n  errorband: {\n    band: {\n      opacity: 0.3\n    },\n    borders: false\n  },\n  scale: defaultScaleConfig,\n  projection: {},\n  legend: defaultLegendConfig,\n  header: {\n    titlePadding: 10,\n    labelPadding: 10\n  },\n  headerColumn: {},\n  headerRow: {},\n  headerFacet: {},\n  selection: defaultSelectionConfig,\n  style: {},\n  title: {},\n  facet: {\n    spacing: DEFAULT_SPACING\n  },\n  concat: {\n    spacing: DEFAULT_SPACING\n  },\n  normalizedNumberFormat: '.0%'\n};\n// Tableau10 color palette, copied from `vegaScale.scheme('tableau10')`\nconst tab10 = ['#4c78a8', '#f58518', '#e45756', '#72b7b2', '#54a24b', '#eeca3b', '#b279a2', '#ff9da6', '#9d755d', '#bab0ac'];\nexport const DEFAULT_FONT_SIZE = {\n  text: 11,\n  guideLabel: 10,\n  guideTitle: 11,\n  groupTitle: 13,\n  groupSubtitle: 12\n};\nexport const DEFAULT_COLOR = {\n  blue: tab10[0],\n  orange: tab10[1],\n  red: tab10[2],\n  teal: tab10[3],\n  green: tab10[4],\n  yellow: tab10[5],\n  purple: tab10[6],\n  pink: tab10[7],\n  brown: tab10[8],\n  gray0: '#000',\n  gray1: '#111',\n  gray2: '#222',\n  gray3: '#333',\n  gray4: '#444',\n  gray5: '#555',\n  gray6: '#666',\n  gray7: '#777',\n  gray8: '#888',\n  gray9: '#999',\n  gray10: '#aaa',\n  gray11: '#bbb',\n  gray12: '#ccc',\n  gray13: '#ddd',\n  gray14: '#eee',\n  gray15: '#fff'\n};\nexport function colorSignalConfig(color = {}) {\n  return {\n    signals: [{\n      name: 'color',\n      value: isObject(color) ? {\n        ...DEFAULT_COLOR,\n        ...color\n      } : DEFAULT_COLOR\n    }],\n    mark: {\n      color: {\n        signal: 'color.blue'\n      }\n    },\n    rule: {\n      color: {\n        signal: 'color.gray0'\n      }\n    },\n    text: {\n      color: {\n        signal: 'color.gray0'\n      }\n    },\n    style: {\n      'guide-label': {\n        fill: {\n          signal: 'color.gray0'\n        }\n      },\n      'guide-title': {\n        fill: {\n          signal: 'color.gray0'\n        }\n      },\n      'group-title': {\n        fill: {\n          signal: 'color.gray0'\n        }\n      },\n      'group-subtitle': {\n        fill: {\n          signal: 'color.gray0'\n        }\n      },\n      cell: {\n        stroke: {\n          signal: 'color.gray8'\n        }\n      }\n    },\n    axis: {\n      domainColor: {\n        signal: 'color.gray13'\n      },\n      gridColor: {\n        signal: 'color.gray8'\n      },\n      tickColor: {\n        signal: 'color.gray13'\n      }\n    },\n    range: {\n      category: [{\n        signal: 'color.blue'\n      }, {\n        signal: 'color.orange'\n      }, {\n        signal: 'color.red'\n      }, {\n        signal: 'color.teal'\n      }, {\n        signal: 'color.green'\n      }, {\n        signal: 'color.yellow'\n      }, {\n        signal: 'color.purple'\n      }, {\n        signal: 'color.pink'\n      }, {\n        signal: 'color.brown'\n      }, {\n        signal: 'color.grey8'\n      }]\n    }\n  };\n}\nexport function fontSizeSignalConfig(fontSize) {\n  return {\n    signals: [{\n      name: 'fontSize',\n      value: isObject(fontSize) ? {\n        ...DEFAULT_FONT_SIZE,\n        ...fontSize\n      } : DEFAULT_FONT_SIZE\n    }],\n    text: {\n      fontSize: {\n        signal: 'fontSize.text'\n      }\n    },\n    style: {\n      'guide-label': {\n        fontSize: {\n          signal: 'fontSize.guideLabel'\n        }\n      },\n      'guide-title': {\n        fontSize: {\n          signal: 'fontSize.guideTitle'\n        }\n      },\n      'group-title': {\n        fontSize: {\n          signal: 'fontSize.groupTitle'\n        }\n      },\n      'group-subtitle': {\n        fontSize: {\n          signal: 'fontSize.groupSubtitle'\n        }\n      }\n    }\n  };\n}\nexport function fontConfig(font) {\n  return {\n    text: {\n      font\n    },\n    style: {\n      'guide-label': {\n        font\n      },\n      'guide-title': {\n        font\n      },\n      'group-title': {\n        font\n      },\n      'group-subtitle': {\n        font\n      }\n    }\n  };\n}\nfunction getAxisConfigInternal(axisConfig) {\n  const props = keys(axisConfig || {});\n  const axisConfigInternal = {};\n  for (const prop of props) {\n    const val = axisConfig[prop];\n    axisConfigInternal[prop] = isConditionalAxisValue(val) ? signalOrValueRefWithCondition(val) : signalRefOrValue(val);\n  }\n  return axisConfigInternal;\n}\nfunction getStyleConfigInternal(styleConfig) {\n  const props = keys(styleConfig);\n  const styleConfigInternal = {};\n  for (const prop of props) {\n    // We need to cast to cheat a bit here since styleConfig can be either mark config or axis config\n    styleConfigInternal[prop] = getAxisConfigInternal(styleConfig[prop]);\n  }\n  return styleConfigInternal;\n}\nconst configPropsWithExpr = [...MARK_CONFIGS, ...AXIS_CONFIGS, ...HEADER_CONFIGS, 'background', 'padding', 'legend', 'lineBreak', 'scale', 'style', 'title', 'view'];\n/**\n * Merge specified config with default config and config for the `color` flag,\n * then replace all expressions with signals\n */\nexport function initConfig(specifiedConfig = {}) {\n  const {\n    color,\n    font,\n    fontSize,\n    selection,\n    ...restConfig\n  } = specifiedConfig;\n  const mergedConfig = mergeConfig({}, duplicate(defaultConfig), font ? fontConfig(font) : {}, color ? colorSignalConfig(color) : {}, fontSize ? fontSizeSignalConfig(fontSize) : {}, restConfig || {});\n  // mergeConfig doesn't recurse and overrides object values.\n  if (selection) {\n    writeConfig(mergedConfig, 'selection', selection, true);\n  }\n  const outputConfig = omit(mergedConfig, configPropsWithExpr);\n  for (const prop of ['background', 'lineBreak', 'padding']) {\n    if (mergedConfig[prop]) {\n      outputConfig[prop] = signalRefOrValue(mergedConfig[prop]);\n    }\n  }\n  for (const markConfigType of mark.MARK_CONFIGS) {\n    if (mergedConfig[markConfigType]) {\n      // FIXME: outputConfig[markConfigType] expects that types are replaced recursively but replaceExprRef only replaces one level deep\n      outputConfig[markConfigType] = replaceExprRef(mergedConfig[markConfigType]);\n    }\n  }\n  for (const axisConfigType of AXIS_CONFIGS) {\n    if (mergedConfig[axisConfigType]) {\n      outputConfig[axisConfigType] = getAxisConfigInternal(mergedConfig[axisConfigType]);\n    }\n  }\n  for (const headerConfigType of HEADER_CONFIGS) {\n    if (mergedConfig[headerConfigType]) {\n      outputConfig[headerConfigType] = replaceExprRef(mergedConfig[headerConfigType]);\n    }\n  }\n  if (mergedConfig.legend) {\n    outputConfig.legend = replaceExprRef(mergedConfig.legend);\n  }\n  if (mergedConfig.scale) {\n    outputConfig.scale = replaceExprRef(mergedConfig.scale);\n  }\n  if (mergedConfig.style) {\n    outputConfig.style = getStyleConfigInternal(mergedConfig.style);\n  }\n  if (mergedConfig.title) {\n    outputConfig.title = replaceExprRef(mergedConfig.title);\n  }\n  if (mergedConfig.view) {\n    outputConfig.view = replaceExprRef(mergedConfig.view);\n  }\n  return outputConfig;\n}\nconst MARK_STYLES = new Set(['view', ...PRIMITIVE_MARKS]);\nconst VL_ONLY_CONFIG_PROPERTIES = ['color', 'fontSize', 'background', 'padding', 'facet', 'concat', 'numberFormat', 'numberFormatType', 'normalizedNumberFormat', 'normalizedNumberFormatType', 'timeFormat', 'countTitle', 'header', 'axisQuantitative', 'axisTemporal', 'axisDiscrete', 'axisPoint', 'axisXBand', 'axisXPoint', 'axisXDiscrete', 'axisXQuantitative', 'axisXTemporal', 'axisYBand', 'axisYPoint', 'axisYDiscrete', 'axisYQuantitative', 'axisYTemporal', 'scale', 'selection', 'overlay' // FIXME: Redesign and unhide this\n];\n\nconst VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX = {\n  view: ['continuousWidth', 'continuousHeight', 'discreteWidth', 'discreteHeight', 'step'],\n  ...VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX\n};\nexport function stripAndRedirectConfig(config) {\n  config = duplicate(config);\n  for (const prop of VL_ONLY_CONFIG_PROPERTIES) {\n    delete config[prop];\n  }\n  if (config.axis) {\n    // delete condition axis config\n    for (const prop in config.axis) {\n      if (isConditionalAxisValue(config.axis[prop])) {\n        delete config.axis[prop];\n      }\n    }\n  }\n  if (config.legend) {\n    for (const prop of VL_ONLY_LEGEND_CONFIG) {\n      delete config.legend[prop];\n    }\n  }\n  // Remove Vega-Lite only generic mark config\n  if (config.mark) {\n    for (const prop of VL_ONLY_MARK_CONFIG_PROPERTIES) {\n      delete config.mark[prop];\n    }\n    if (config.mark.tooltip && isObject(config.mark.tooltip)) {\n      delete config.mark.tooltip;\n    }\n  }\n  if (config.params) {\n    config.signals = (config.signals || []).concat(assembleParameterSignals(config.params));\n    delete config.params;\n  }\n  for (const markType of MARK_STYLES) {\n    // Remove Vega-Lite-only mark config\n    for (const prop of VL_ONLY_MARK_CONFIG_PROPERTIES) {\n      delete config[markType][prop];\n    }\n    // Remove Vega-Lite only mark-specific config\n    const vlOnlyMarkSpecificConfigs = VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX[markType];\n    if (vlOnlyMarkSpecificConfigs) {\n      for (const prop of vlOnlyMarkSpecificConfigs) {\n        delete config[markType][prop];\n      }\n    }\n    // Redirect mark config to config.style so that mark config only affect its own mark type\n    // without affecting other marks that share the same underlying Vega marks.\n    // For example, config.rect should not affect bar marks.\n    redirectConfigToStyleConfig(config, markType);\n  }\n  for (const m of getAllCompositeMarks()) {\n    // Clean up the composite mark config as we don't need them in the output specs anymore\n    delete config[m];\n  }\n  redirectTitleConfig(config);\n  // Remove empty config objects.\n  for (const prop in config) {\n    if (isObject(config[prop]) && isEmpty(config[prop])) {\n      delete config[prop];\n    }\n  }\n  return isEmpty(config) ? undefined : config;\n}\n/**\n *\n * Redirect config.title -- so that title config do not affect header labels,\n * which also uses `title` directive to implement.\n *\n * For subtitle configs in config.title, keep them in config.title as header titles never have subtitles.\n */\nfunction redirectTitleConfig(config) {\n  const {\n    titleMarkConfig,\n    subtitleMarkConfig,\n    subtitle\n  } = extractTitleConfig(config.title);\n  // set config.style if title/subtitleMarkConfig is not an empty object\n  if (!isEmpty(titleMarkConfig)) {\n    config.style['group-title'] = {\n      ...config.style['group-title'],\n      ...titleMarkConfig // config.title has higher precedence than config.style.group-title in Vega\n    };\n  }\n\n  if (!isEmpty(subtitleMarkConfig)) {\n    config.style['group-subtitle'] = {\n      ...config.style['group-subtitle'],\n      ...subtitleMarkConfig\n    };\n  }\n  // subtitle part can stay in config.title since header titles do not use subtitle\n  if (!isEmpty(subtitle)) {\n    config.title = subtitle;\n  } else {\n    delete config.title;\n  }\n}\nfunction redirectConfigToStyleConfig(config, prop,\n// string = composite mark\ntoProp, compositeMarkPart) {\n  const propConfig = compositeMarkPart ? config[prop][compositeMarkPart] : config[prop];\n  if (prop === 'view') {\n    toProp = 'cell'; // View's default style is \"cell\"\n  }\n\n  const style = {\n    ...propConfig,\n    ...config.style[toProp ?? prop]\n  };\n  // set config.style if it is not an empty object\n  if (!isEmpty(style)) {\n    config.style[toProp ?? prop] = style;\n  }\n  if (!compositeMarkPart) {\n    // For composite mark, so don't delete the whole config yet as we have to do multiple redirections.\n    delete config[prop];\n  }\n}","map":{"version":3,"names":["writeConfig","isObject","mergeConfig","AXIS_CONFIGS","isConditionalAxisValue","signalOrValueRefWithCondition","signalRefOrValue","getAllCompositeMarks","replaceExprRef","VL_ONLY_LEGEND_CONFIG","HEADER_CONFIGS","defaultLegendConfig","mark","MARK_CONFIGS","PRIMITIVE_MARKS","VL_ONLY_MARK_CONFIG_PROPERTIES","VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX","assembleParameterSignals","defaultScaleConfig","defaultConfig","defaultSelectionConfig","DEFAULT_SPACING","isStep","extractTitleConfig","duplicate","getFirstDefined","isEmpty","keys","omit","getViewConfigContinuousSize","viewConfig","channel","getViewConfigDiscreteStep","size","getViewConfigDiscreteSize","step","DEFAULT_STEP","defaultViewConfig","continuousWidth","continuousHeight","isVgScheme","rangeScheme","background","padding","timeFormat","countTitle","view","defaultMarkConfig","arc","area","bar","defaultBarConfig","circle","geoshape","image","line","point","rect","defaultRectConfig","rule","color","square","text","tick","defaultTickConfig","trail","boxplot","extent","box","median","outliers","ticks","errorbar","center","errorband","band","opacity","borders","scale","projection","legend","header","titlePadding","labelPadding","headerColumn","headerRow","headerFacet","selection","style","title","facet","spacing","concat","normalizedNumberFormat","tab10","DEFAULT_FONT_SIZE","guideLabel","guideTitle","groupTitle","groupSubtitle","DEFAULT_COLOR","blue","orange","red","teal","green","yellow","purple","pink","brown","gray0","gray1","gray2","gray3","gray4","gray5","gray6","gray7","gray8","gray9","gray10","gray11","gray12","gray13","gray14","gray15","colorSignalConfig","signals","name","value","signal","fill","cell","stroke","axis","domainColor","gridColor","tickColor","range","category","fontSizeSignalConfig","fontSize","fontConfig","font","getAxisConfigInternal","axisConfig","props","axisConfigInternal","prop","val","getStyleConfigInternal","styleConfig","styleConfigInternal","configPropsWithExpr","initConfig","specifiedConfig","restConfig","mergedConfig","outputConfig","markConfigType","axisConfigType","headerConfigType","MARK_STYLES","Set","VL_ONLY_CONFIG_PROPERTIES","VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX","stripAndRedirectConfig","config","tooltip","params","markType","vlOnlyMarkSpecificConfigs","redirectConfigToStyleConfig","m","redirectTitleConfig","undefined","titleMarkConfig","subtitleMarkConfig","subtitle","toProp","compositeMarkPart","propConfig"],"sources":["../../src/config.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}